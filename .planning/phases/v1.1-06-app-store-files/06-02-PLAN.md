---
phase: v1.1-06-app-store-files
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - livos/packages/ui/src/modules/app-store/app-page/top-header.tsx
  - livos/packages/ui/src/modules/app-store/app-page/shared.tsx
  - livos/packages/ui/src/modules/app-store/app-page/app-content.tsx
  - livos/packages/ui/src/modules/app-store/app-page/info-section.tsx
  - livos/packages/ui/src/modules/app-store/app-page/dependencies.tsx
  - livos/packages/ui/src/modules/app-store/app-page/recommendations-section.tsx
  - livos/packages/ui/src/modules/app-store/app-page/settings-section.tsx
  - livos/packages/ui/src/modules/app-store/app-page/public-access-section.tsx
  - livos/packages/ui/src/modules/app-store/app-page/release-notes-section.tsx
  - livos/packages/ui/src/modules/app-store/app-page/about-section.tsx
  - livos/packages/ui/src/modules/app-store/app-page/app-settings-dialog.tsx
  - livos/packages/ui/src/modules/app-store/app-page/default-credentials-dialog.tsx
  - livos/packages/ui/src/modules/app-store/updates-dialog.tsx
  - livos/packages/ui/src/modules/app-store/select-dependencies-dialog.tsx
  - livos/packages/ui/src/modules/app-store/community-app-store-dialog.tsx
  - livos/packages/ui/src/modules/window/app-contents/app-store-routes/app-page-window.tsx
  - livos/packages/ui/src/modules/window/app-contents/app-store-routes/marketplace-app-window.tsx
  - livos/packages/ui/src/routes/app-store/app-page/index.tsx
autonomous: true

must_haves:
  truths:
    - "App detail hero header uses semantic typography and surface tokens"
    - "App detail content sections (info, dependencies, recommendations, settings, public-access) use semantic tokens"
    - "App detail local shared.tsx card/text styles use semantic tokens matching global shared.tsx"
    - "Public access section preserves functional status colors (green/red/yellow)"
    - "Updates dialog uses semantic tokens with border-border-subtle"
    - "Select dependencies dialog uses semantic surface/border tokens"
    - "Community app store dialog preserves warning colors (yellow)"
    - "App settings and credentials dialogs follow Phase 3 dialog token patterns"
    - "Window-mode app detail pages use consistent semantic tokens"
    - "All opacity-XX text helpers replaced with text-text-tertiary/secondary"
  artifacts:
    - path: "livos/packages/ui/src/modules/app-store/app-page/top-header.tsx"
      provides: "App detail hero header with semantic tokens"
      contains: "text-text-primary"
    - path: "livos/packages/ui/src/modules/app-store/app-page/shared.tsx"
      provides: "Local card/text styles with semantic tokens"
      contains: "bg-surface"
    - path: "livos/packages/ui/src/modules/app-store/app-page/public-access-section.tsx"
      provides: "Public access with preserved status colors"
      contains: "text-green-400"
    - path: "livos/packages/ui/src/modules/app-store/select-dependencies-dialog.tsx"
      provides: "Dependency dialog with semantic tokens"
      contains: "border-border"
  key_links:
    - from: "app-page/shared.tsx cardFaintClass"
      to: "global shared.tsx"
      via: "import of cardFaintClass"
      pattern: "cardFaintClass"
    - from: "app detail sections"
      to: "semantic tokens"
      via: "text-text-*, bg-surface-*, border-border-* classes"
      pattern: "text-text-secondary"
    - from: "window app-page-window.tsx"
      to: "sheet-mode app-page/index.tsx"
      via: "parallel page structure"
      pattern: "bg-surface|border-border"
---

<objective>
Migrate the App Store detail page (hero header, all content sections) and all app store dialogs (updates, dependencies, community, settings, credentials) to semantic design tokens. Also update window-mode detail page variants.

Purpose: The app detail page is the primary information page for each app, with a hero header and 8+ content sections. The dialogs handle updates, dependency selection, community stores, and app configuration. Migrating all of these ensures the complete app store experience uses the new design language.

Output: App detail hero, all content sections, all dialogs, and window-mode detail variants fully migrated to semantic tokens.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP-v1.1.md
@.planning/STATE.md
@.planning/phases/v1.1-06-app-store-files/06-RESEARCH.md
@.planning/phases/v1.1-06-app-store-files/06-01-SUMMARY.md

Source files:
@livos/packages/ui/src/modules/app-store/app-page/top-header.tsx
@livos/packages/ui/src/modules/app-store/app-page/shared.tsx
@livos/packages/ui/src/modules/app-store/app-page/app-content.tsx
@livos/packages/ui/src/modules/app-store/app-page/info-section.tsx
@livos/packages/ui/src/modules/app-store/app-page/dependencies.tsx
@livos/packages/ui/src/modules/app-store/app-page/recommendations-section.tsx
@livos/packages/ui/src/modules/app-store/app-page/settings-section.tsx
@livos/packages/ui/src/modules/app-store/app-page/public-access-section.tsx
@livos/packages/ui/src/modules/app-store/app-page/release-notes-section.tsx
@livos/packages/ui/src/modules/app-store/app-page/about-section.tsx
@livos/packages/ui/src/modules/app-store/app-page/app-settings-dialog.tsx
@livos/packages/ui/src/modules/app-store/app-page/default-credentials-dialog.tsx
@livos/packages/ui/src/modules/app-store/updates-dialog.tsx
@livos/packages/ui/src/modules/app-store/select-dependencies-dialog.tsx
@livos/packages/ui/src/modules/app-store/community-app-store-dialog.tsx
@livos/packages/ui/src/modules/window/app-contents/app-store-routes/app-page-window.tsx
@livos/packages/ui/src/modules/window/app-contents/app-store-routes/marketplace-app-window.tsx
@livos/packages/ui/src/routes/app-store/app-page/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate app detail hero header, local shared.tsx, and all content sections (AS-03)</name>
  <files>
    livos/packages/ui/src/modules/app-store/app-page/top-header.tsx
    livos/packages/ui/src/modules/app-store/app-page/shared.tsx
    livos/packages/ui/src/modules/app-store/app-page/app-content.tsx
    livos/packages/ui/src/modules/app-store/app-page/info-section.tsx
    livos/packages/ui/src/modules/app-store/app-page/dependencies.tsx
    livos/packages/ui/src/modules/app-store/app-page/recommendations-section.tsx
    livos/packages/ui/src/modules/app-store/app-page/settings-section.tsx
    livos/packages/ui/src/modules/app-store/app-page/public-access-section.tsx
    livos/packages/ui/src/modules/app-store/app-page/release-notes-section.tsx
    livos/packages/ui/src/modules/app-store/app-page/about-section.tsx
    livos/packages/ui/src/routes/app-store/app-page/index.tsx
  </files>
  <action>
**Opacity mapping reference (apply consistently across ALL files):**
- `white/[0.04]` or `white/5` -> `surface-base`
- `white/[0.06]` -> `surface-1`
- `white/[0.08]` or `white/10` -> `surface-2`
- `white/[0.14]` or `white/[0.15]` -> `surface-3`
- `border-white/[0.06]` or `border-white/5` -> `border-border-subtle`
- `border-white/[0.10]` or `border-white/10` -> `border-border-default`
- `text-white/40` -> `text-text-tertiary`
- `text-white/50` -> `text-text-secondary`
- `text-white/60` -> `text-text-secondary`
- `text-white/70` -> `text-text-primary`
- `text-white/80` or `text-white/90` -> `text-text-primary`
- `opacity-50` (on text) -> replace with `text-text-secondary`
- `opacity-40` (on text) -> replace with `text-text-tertiary`
- Numeric typography: `text-12` -> `text-caption`, `text-13` -> `text-body-sm`, `text-14` -> `text-body`, `text-15` -> `text-body-lg` (16px), `text-16` -> `text-body-lg`, `text-19` -> `text-heading-sm` (18px close), `text-24` -> `text-heading-lg` (24px)
- Numeric radii: `rounded-6` -> `rounded-radius-sm`, `rounded-8` -> `rounded-radius-sm` (8px), `rounded-10` -> `rounded-radius-md` (12px), `rounded-12` -> `rounded-radius-md`, `rounded-20` -> `rounded-radius-xl`
- `px-[20px]` -> `px-5` (standard Tailwind), `py-[30px]` -> `py-8` (closest)

**top-header.tsx (~94 lines) — Hero header:**
1. App icon: `rounded-8` -> `rounded-radius-sm`, `rounded-12` -> `rounded-radius-md`
2. App name: `text-24` -> `text-heading-lg`, `text-16` -> `text-body-lg`
3. Developer text: `text-13` -> `text-body-sm`, opacity if present -> `text-text-secondary`
4. `rounded-20` -> `rounded-radius-xl`
5. `text-19` -> `text-heading-sm`
6. `text-12` -> `text-caption`

**app-page/shared.tsx (~70 lines) — Local card/text styles:**
1. If it imports `cardFaintClass` from the global shared.tsx, that's already migrated in Plan 06-01.
2. `rounded-12` -> `rounded-radius-md`
3. `px-[20px]` -> `px-5`, `py-[30px]` -> `py-8`
4. `text-12` -> `text-caption`, `text-15` -> `text-body-lg`, `text-13` -> `text-body-sm`

**app-content.tsx (~68 lines):**
- `gap-5`, `max-w-sm` — these are standard Tailwind, keep.
- Migrate any raw opacity values.

**info-section.tsx (~69 lines):**
- `text-14` -> `text-body`
- `opacity-50` -> replace with `text-text-secondary`
- `text-brand-lighter` — preserve (brand token, functional)

**dependencies.tsx (~94 lines):**
- `rounded-8` -> `rounded-radius-sm`
- `text-14` -> `text-body`
- `h-[16px] w-[16px]` -> `h-icon-sm w-icon-sm` (16px matches icon-sm)
- `text-slate-500` — preserve (installed check mark)
- `text-brand-lightest`, `text-brand-lighter` — preserve (functional brand)

**recommendations-section.tsx (~54 lines):**
- `rounded-10` -> `rounded-radius-md`
- `text-14` -> `text-body`, `text-12` -> `text-caption`
- `opacity-40` -> replace with `text-text-tertiary`

**settings-section.tsx (~42 lines):**
- `text-15` -> `text-body-lg`, `text-14` -> `text-body`

**public-access-section.tsx (~216 lines):**
- `white/10` -> `surface-2`, `white/5` -> `surface-base`
- `white/50` -> `text-text-secondary`, `white/90` -> `text-text-primary`, `white/40` -> `text-text-tertiary`
- **PRESERVE functional status colors:** `text-yellow-400`, `text-green-400`, `text-red-400`, `text-red-300` (DNS status indicators)

**release-notes-section.tsx (~18 lines) and about-section.tsx (~13 lines):**
- Minimal changes — migrate any raw values found.

**routes/app-store/app-page/index.tsx (~73 lines):**
- Mostly composition — migrate any local raw values.

**Do NOT modify:**
- Business logic, API calls, state management
- Functional status colors (green/red/yellow) in public-access-section
- Brand token references (text-brand, text-brand-lighter, text-brand-lightest)
- Import paths (unless adding cn)
  </action>
  <verify>
Run `npx tsc --noEmit --project livos/packages/ui/tsconfig.json` — no type errors.
Search for `opacity-50` or `opacity-40` across all app-page/ files — should not exist (replaced with text-text-*).
Search for `text-24` in top-header.tsx — should not exist (replaced with text-heading-lg).
Verify `text-green-400` and `text-red-400` preserved in public-access-section.tsx.
Verify `text-brand-lighter` preserved in info-section.tsx and dependencies.tsx.
  </verify>
  <done>
Hero header uses semantic typography (heading-lg, body-lg, body-sm). Local shared.tsx uses semantic radii and typography. All 8 content sections migrated: info, dependencies, recommendations, settings, public-access, release-notes, about. Status colors (green/red/yellow) preserved. Brand links preserved. Opacity hacks replaced with semantic text tokens.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate app store dialogs and window-mode detail pages (AS-03)</name>
  <files>
    livos/packages/ui/src/modules/app-store/updates-dialog.tsx
    livos/packages/ui/src/modules/app-store/select-dependencies-dialog.tsx
    livos/packages/ui/src/modules/app-store/community-app-store-dialog.tsx
    livos/packages/ui/src/modules/app-store/app-page/app-settings-dialog.tsx
    livos/packages/ui/src/modules/app-store/app-page/default-credentials-dialog.tsx
    livos/packages/ui/src/modules/window/app-contents/app-store-routes/app-page-window.tsx
    livos/packages/ui/src/modules/window/app-contents/app-store-routes/marketplace-app-window.tsx
  </files>
  <action>
Use the same opacity mapping reference from Task 1.

**updates-dialog.tsx (~164 lines):**
- `rounded-8` -> `rounded-radius-sm`
- `text-13` -> `text-body-sm`
- `opacity-40` -> replace with `text-text-tertiary`
- `text-brand` — preserve (functional)
- Dialog should inherit Phase 3 dialog patterns (bg-dialog-content if it overrides dialog background)

**select-dependencies-dialog.tsx (~303 lines):**
- `divide-white/6` -> `divide-border-subtle` (divider color)
- `bg-white/6` -> `bg-surface-1`
- `rounded-12` -> `rounded-radius-md`
- `h-[50px]`, `h-[60px]`, `h-[40px]` -> keep as functional pixel heights (these are list item heights)
- `text-[14px]` -> `text-body`
- `rounded-6` -> `rounded-radius-sm`, `rounded-4` -> `rounded-radius-sm`
- `w-[256px]` -> keep (specific dialog width)

**community-app-store-dialog.tsx (~150 lines):**
- `text-13` -> `text-body-sm`
- `white/50` -> `text-text-secondary`
- `rounded-8` -> `rounded-radius-sm`
- `bg-yellow-700/50`, `text-yellow-300/80` -> **PRESERVE** (warning status colors)
- `text-brand` — preserve (functional)

**app-settings-dialog.tsx (~186 lines):**
- Should follow Phase 3 dialog patterns (bg-dialog-content, border-border-subtle)
- Migrate any raw white/XX values to semantic tokens
- Keep functional brand/status colors

**default-credentials-dialog.tsx (~150 lines):**
- Should follow Phase 3 dialog patterns
- Migrate any raw values to semantic tokens

**app-page-window.tsx (~105 lines) and marketplace-app-window.tsx (~112 lines):**
- Window-mode variants of the app detail page. Migrate local raw values to semantic tokens.
- Ensure consistency with sheet-mode app-page/index.tsx from Task 1.

**Do NOT modify:**
- Dialog open/close logic, form submission handlers
- Warning colors (yellow) in community-app-store-dialog
- Brand tokens (text-brand)
- Dialog overlay patterns (keep existing backdrop)
- Functional pixel heights in select-dependencies-dialog
  </action>
  <verify>
Run `npx tsc --noEmit --project livos/packages/ui/tsconfig.json` — no type errors.
Search for `divide-white` in select-dependencies-dialog.tsx — should not exist (replaced with divide-border-subtle).
Search for `bg-white/6` in select-dependencies-dialog.tsx — should not exist (replaced with bg-surface-1).
Verify `bg-yellow-700/50` preserved in community-app-store-dialog.tsx.
Verify `text-brand` preserved in updates-dialog.tsx and community-app-store-dialog.tsx.
  </verify>
  <done>
Updates dialog, select-dependencies dialog, community-app-store dialog, app-settings dialog, and default-credentials dialog all use semantic tokens. Warning colors (yellow) preserved. Brand tokens preserved. Window-mode detail pages (app-page-window, marketplace-app-window) match sheet-mode styling. All divide/border/surface values use semantic tokens.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. `npx tsc --noEmit --project livos/packages/ui/tsconfig.json` passes
2. `grep -r 'opacity-50\|opacity-40' livos/packages/ui/src/modules/app-store/app-page/` — should return 0 matches
3. `grep -r 'text-24\|text-19\|text-16' livos/packages/ui/src/modules/app-store/app-page/top-header.tsx` — should return 0 (replaced with semantic typography)
4. `grep 'text-green-400\|text-red-400\|text-yellow-400' livos/packages/ui/src/modules/app-store/app-page/public-access-section.tsx` — should return matches (preserved)
5. `grep 'text-brand' livos/packages/ui/src/modules/app-store/updates-dialog.tsx` — should return match (preserved)
6. `grep 'bg-yellow-700' livos/packages/ui/src/modules/app-store/community-app-store-dialog.tsx` — should return match (preserved)
7. `grep 'divide-border-subtle' livos/packages/ui/src/modules/app-store/select-dependencies-dialog.tsx` — should return match
8. No business logic, form handlers, or dialog open/close behavior modified
9. Window-mode detail pages consistent with sheet-mode
</verification>

<success_criteria>
- Hero header uses text-heading-lg for app name, text-body-sm for developer, rounded-radius-* for icon
- All 8 content sections use semantic typography (caption/body/body-sm/body-lg) and text-text-* tokens
- public-access-section preserves text-green-400, text-red-400, text-yellow-400 status colors
- Brand tokens (text-brand, text-brand-lighter, text-brand-lightest) preserved throughout
- All opacity-XX hacks replaced with semantic text tokens
- Updates dialog uses text-body-sm, rounded-radius-sm, text-text-tertiary
- Select dependencies dialog uses divide-border-subtle, bg-surface-1, rounded-radius-md
- Community dialog preserves bg-yellow-700/50 warning
- App settings and credentials dialogs follow Phase 3 dialog patterns
- Window-mode app detail pages match sheet-mode token vocabulary
- No type errors introduced
- No business logic modified
</success_criteria>

<output>
After completion, create `.planning/phases/v1.1-06-app-store-files/06-02-SUMMARY.md`
</output>
