---
phase: v1.1-01-design-system
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - livos/packages/ui/src/shadcn-components/ui/button.tsx
  - livos/packages/ui/src/shadcn-components/ui/button-styles.css
  - livos/packages/ui/src/components/ui/card.tsx
autonomous: true

must_haves:
  truths:
    - "Button component uses semantic design tokens (surface colors, border tokens, semantic text sizes, semantic radii) instead of raw white/N opacity values"
    - "Button has 4 clear variants: default, primary, ghost, destructive — each visually distinct"
    - "Button has consistent size scale: sm, md, default, lg, xl, dialog, icon-only — using semantic radii and text sizes"
    - "Card component uses semantic surface/border tokens instead of raw white/N opacity values"
    - "Card has subtle depth through elevation shadow instead of heavy glassmorphism inset shadows"
    - "Focus states on button use ring-3 with appropriate contrast for WCAG 2.4.7 compliance"
  artifacts:
    - path: "livos/packages/ui/src/shadcn-components/ui/button.tsx"
      provides: "Refined button with CVA variants using semantic tokens"
      exports: ["Button", "buttonVariants"]
      contains: "surface-1"
    - path: "livos/packages/ui/src/shadcn-components/ui/button-styles.css"
      provides: "Button active state styles"
      contains: "livinity-button"
    - path: "livos/packages/ui/src/components/ui/card.tsx"
      provides: "Refined card with semantic surface/border tokens"
      exports: ["Card", "cardClass"]
      contains: "surface-1"
  key_links:
    - from: "livos/packages/ui/src/shadcn-components/ui/button.tsx"
      to: "livos/packages/ui/tailwind.config.ts"
      via: "Semantic token classes"
      pattern: "(bg-surface-|border-border-|text-body|rounded-radius-)"
    - from: "livos/packages/ui/src/components/ui/card.tsx"
      to: "livos/packages/ui/tailwind.config.ts"
      via: "Semantic token classes"
      pattern: "(bg-surface-|border-border-|shadow-elevation-)"
---

<objective>
Redesign the Button and Card components to use the new semantic design tokens established in Plan 01. Replace raw opacity values (bg-white/8, border-white/10) with semantic tokens (bg-surface-1, border-border-default). Replace numeric font sizes and radii with semantic equivalents.

Purpose: Button and Card are the most-used base components. Migrating them first establishes the pattern for all other component migrations in subsequent phases. This directly satisfies requirements DS-05 (card) and DS-06 (button).

Output: Refined button.tsx with cleaner variants using semantic tokens, refined card.tsx with semantic surface/border/shadow tokens.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP-v1.1.md
@.planning/STATE.md
@.planning/phases/v1.1-01-design-system/01-RESEARCH.md
@.planning/phases/v1.1-01-design-system/01-01-SUMMARY.md

@livos/packages/ui/tailwind.config.ts
@livos/packages/ui/src/shadcn-components/ui/button.tsx
@livos/packages/ui/src/shadcn-components/ui/button-styles.css
@livos/packages/ui/src/components/ui/card.tsx
@livos/packages/ui/src/shadcn-lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign Button component with semantic tokens</name>
  <files>livos/packages/ui/src/shadcn-components/ui/button.tsx, livos/packages/ui/src/shadcn-components/ui/button-styles.css</files>
  <action>
Refactor the Button component's CVA definition to use semantic design tokens. The goal is cleaner, more subtle styling while maintaining all existing variant names and the component's public API (ButtonProps, Button, buttonVariants exports).

**IMPORTANT:** Preserve the component's structural code (forwardRef, Slot logic, type defaulting, icon-only null children, displayName). Only change the CVA class strings.

**Base classes** — Update to use semantic tokens where applicable:
- Keep: `inline-flex items-center justify-center font-semibold transition-all disabled:pointer-events-none disabled:opacity-50 gap-2 shrink-0 disabled:shadow-none duration-200 livinity-button bg-clip-padding`
- Change: `focus:outline-none focus:ring-3` to `focus-visible:outline-none focus-visible:ring-3 focus-visible:ring-white/20` (use focus-visible not focus for better UX, consistent ring color)
- Change: `-tracking-2 leading-inter-trimmed` to `-tracking-2` (keep tracking, remove tight line height from base — sizes will set their own)

**Variant: default** — Replace raw opacity with semantic tokens:
```
'bg-surface-1 hover:bg-surface-2 active:bg-surface-base border border-border-default ring-white/20 data-[state=open]:bg-surface-2 hover:border-border-emphasis focus-visible:border-border-emphasis data-[state=open]:border-border-emphasis shadow-button-highlight-soft-hpx'
```
Rationale: `bg-white/8` -> `bg-surface-1` (0.06 vs 0.08, slightly more subtle). `border-white/10` -> `border-border-default`. `hover:bg-white/12` -> `hover:bg-surface-2` (0.10 vs 0.12, slightly more subtle). Removes `focus:bg-white/12` (redundant with focus ring). Keeps inset highlight for a touch of polish.

**Variant: primary** — Minor refinement, keep brand color pattern:
```
'bg-brand hover:bg-brand-lighter focus-visible:bg-brand-lighter active:bg-brand ring-brand/40 data-[state=open]:bg-brand-lighter shadow-button-highlight-hpx hover:scale-[1.02] active:scale-[0.98]'
```
Change: `focus:` to `focus-visible:` only.

**Variant: secondary** — Keep as-is but update focus:
```
'bg-white/90 hover:bg-white focus-visible:bg-white active:bg-white/95 ring-white/40 data-[state=open]:bg-white text-black hover:scale-[1.02] active:scale-[0.98]'
```
Change: `focus:` to `focus-visible:` only.

**Variant: destructive** — Keep as-is but update focus:
```
'bg-destructive2 hover:bg-destructive2-lighter focus-visible:bg-destructive2-lighter active:bg-destructive2 ring-destructive/40 data-[state=open]:bg-destructive2-lighter shadow-button-highlight-hpx hover:scale-[1.02] active:scale-[0.98]'
```
Change: `focus:` to `focus-visible:` only.

**ADD new variant: ghost** — A minimal variant that reveals on hover:
```
ghost: 'hover:bg-surface-1 active:bg-surface-base border border-transparent hover:border-border-subtle ring-white/20'
```
Add `ghost` to the variants object after `destructive`.

**Size variants** — Replace numeric tokens with semantic equivalents:
```
sm: 'rounded-radius-sm h-[28px] px-3 text-caption gap-1.5'
md: 'rounded-radius-md h-[34px] min-w-[80px] px-4 text-body-sm'
'md-squared': 'rounded-radius-md h-[38px] px-3 text-body-sm gap-2'
default: 'rounded-radius-md h-[34px] px-3.5 text-body-sm'
'input-short': 'rounded-radius-md h-10 px-5 text-body-sm font-semibold min-w-[80px]'
dialog: 'rounded-14 h-[44px] md:h-[36px] min-w-[90px] px-5 font-semibold w-full md:w-auto text-body'
lg: 'rounded-14 h-[44px] px-6 text-body-lg font-semibold'
xl: 'rounded-radius-lg h-[52px] px-7 text-body-lg font-semibold'
'icon-only': 'rounded-radius-md h-[34px] w-[34px]'
```
Key changes: `text-12` -> `text-caption`, `text-13` -> `text-body-sm`, `text-14` -> `text-body`, `text-15` -> `text-body-lg`. `rounded-10` -> `rounded-radius-sm`, `rounded-12` -> `rounded-radius-md`, `rounded-16` -> `rounded-radius-lg`. Keep `rounded-14` for dialog and lg sizes (between md and lg, these will be migrated in Phase 3 when dialogs are redesigned).

**Text variant** — Keep unchanged (default and destructive text colors).

**compoundVariants** — Keep unchanged.

**button-styles.css** — Keep the `.livinity-button:active { scale: 0.97; }` rule unchanged.

**Do NOT change:**
- The ButtonProps interface
- The forwardRef implementation
- The Slot/asChild logic
- The type defaulting logic (`props.type ?? 'button'`)
- The icon-only children handling
- The displayName
- The export statement
  </action>
  <verify>
Run `npx tsc --noEmit` in the ui package to verify no TypeScript errors.
Grep for `bg-surface-1` in button.tsx to confirm semantic surface tokens used.
Grep for `border-border-default` in button.tsx to confirm semantic border tokens used.
Grep for `text-body-sm` in button.tsx to confirm semantic text sizes used.
Grep for `rounded-radius-` in button.tsx to confirm semantic radii used.
Grep for `ghost:` in button.tsx to confirm ghost variant exists.
Grep for `focus-visible:` in button.tsx to confirm focus-visible pattern (not focus:).
Verify exports unchanged: `Button`, `buttonVariants` still exported.
  </verify>
  <done>
Button component uses semantic design tokens throughout. Default variant uses surface-1/2, border-default/emphasis. All focus states use focus-visible instead of focus. Sizes use semantic text (caption, body-sm, body, body-lg) and radii (radius-sm, radius-md, radius-lg). New ghost variant added. Public API unchanged. TypeScript compiles cleanly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Redesign Card component with semantic tokens</name>
  <files>livos/packages/ui/src/components/ui/card.tsx</files>
  <action>
Refactor the Card component to use semantic design tokens. The card currently uses raw opacity values and heavy shadows. Replace with cleaner, subtler styling.

**Current cardClass:**
```
rounded-20 bg-white/6 px-4 py-5 max-lg:min-h-[95px] lg:p-6 border border-white/5 shadow-card-elevated transition-all duration-200 hover:bg-white/8 hover:border-white/10 hover:shadow-card-hover
```

**New cardClass:**
```
rounded-radius-xl bg-surface-1 px-4 py-5 max-lg:min-h-[95px] lg:p-6 border border-border-subtle shadow-elevation-sm transition-all duration-200 hover:bg-surface-2 hover:border-border-default hover:shadow-elevation-md
```

Token mapping:
- `rounded-20` -> `rounded-radius-xl` (20px, same value)
- `bg-white/6` -> `bg-surface-1` (rgba 0.06, same value)
- `border-white/5` -> `border-border-subtle` (rgba 0.06, very close to 0.05)
- `shadow-card-elevated` -> `shadow-elevation-sm` (cleaner, no inset shadow)
- `hover:bg-white/8` -> `hover:bg-surface-2` (rgba 0.10 vs 0.08, slightly more pronounced hover)
- `hover:border-white/10` -> `hover:border-border-default` (rgba 0.10, same value)
- `hover:shadow-card-hover` -> `hover:shadow-elevation-md` (cleaner elevation, no inset shadow)

Keep the component structure, props, and exports exactly the same.

**Do NOT change:**
- The component function signature
- The spread props pattern
- The cn() usage pattern
- The exports (Card, cardClass)
  </action>
  <verify>
Grep for `bg-surface-1` in card.tsx to confirm semantic surface token used.
Grep for `border-border-subtle` in card.tsx to confirm semantic border token.
Grep for `shadow-elevation-sm` in card.tsx to confirm elevation shadow.
Grep for `rounded-radius-xl` in card.tsx to confirm semantic radius.
Verify exports: `Card` and `cardClass` still exported.
Run `npx tsc --noEmit` to confirm compilation.
  </verify>
  <done>
Card component uses semantic design tokens throughout: surface-1/2 for backgrounds, border-subtle/default for borders, elevation-sm/md for shadows, radius-xl for corners. Cleaner look with subtle depth instead of heavy inset shadows. Public API unchanged.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes in ui package
2. Button has semantic tokens: grep for `surface-`, `border-`, `text-body`, `rounded-radius-` in button.tsx
3. Button has ghost variant: grep for `ghost` in button.tsx
4. Button focus uses focus-visible: no instances of bare `focus:` (only `focus-visible:`) in button.tsx
5. Card has semantic tokens: grep for `surface-`, `border-`, `elevation-`, `radius-` in card.tsx
6. Both components maintain their existing exports and public API
7. Visually: button default variant should show subtle surface background with clean border, not heavy glassmorphism
</verification>

<success_criteria>
- Button component fully migrated to semantic tokens with ghost variant added
- Card component fully migrated to semantic tokens with cleaner elevation shadows
- All existing variants and sizes preserved (no breaking changes)
- focus-visible used consistently instead of focus
- TypeScript compilation succeeds
- Both components export their existing public API unchanged
</success_criteria>

<output>
After completion, create `.planning/phases/v1.1-01-design-system/01-02-SUMMARY.md`
</output>
