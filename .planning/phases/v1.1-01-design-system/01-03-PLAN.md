---
phase: v1.1-01-design-system
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - livos/packages/ui/src/shadcn-components/ui/input.tsx
  - livos/packages/ui/src/shadcn-components/ui/select.tsx
  - livos/packages/ui/src/shadcn-components/ui/switch.tsx
autonomous: true

must_haves:
  truths:
    - "Input component uses semantic tokens (surface-base for bg, border-default for border, text-primary for filled text, text-tertiary for placeholder)"
    - "Input has clean focus state: brand-colored border with brand-tinted ring, WCAG 2.4.7 compliant"
    - "Select trigger and content use semantic surface/border/text tokens"
    - "Switch uses semantic tokens and brand color for checked state"
    - "All form components have consistent sizing (h-12 default, h-10 short) and border radius (radius-md/radius-lg)"
  artifacts:
    - path: "livos/packages/ui/src/shadcn-components/ui/input.tsx"
      provides: "Refined input with CVA variants using semantic tokens and brand-colored focus"
      exports: ["Input", "InputProps", "Labeled", "PasswordInput", "AnimatedInputError", "InputError"]
      contains: "surface-base"
    - path: "livos/packages/ui/src/shadcn-components/ui/select.tsx"
      provides: "Refined select with semantic surface/border tokens"
      exports: ["Select", "SelectTrigger", "SelectContent", "SelectItem", "SelectLabel", "SelectSeparator", "SelectValue", "SelectGroup", "SelectScrollUpButton", "SelectScrollDownButton"]
      contains: "surface-1"
    - path: "livos/packages/ui/src/shadcn-components/ui/switch.tsx"
      provides: "Refined switch with semantic tokens"
      exports: ["Switch"]
      contains: "surface-2"
  key_links:
    - from: "livos/packages/ui/src/shadcn-components/ui/input.tsx"
      to: "livos/packages/ui/tailwind.config.ts"
      via: "Semantic token classes and brand color focus"
      pattern: "(bg-surface-|border-border-|text-text-|focus-visible:border-brand)"
    - from: "livos/packages/ui/src/shadcn-components/ui/select.tsx"
      to: "livos/packages/ui/tailwind.config.ts"
      via: "Semantic token classes"
      pattern: "(bg-surface-|border-border-|text-text-)"
---

<objective>
Redesign the Input, Select, and Switch components to use semantic design tokens. Replace raw opacity values with semantic surface/border/text tokens and add brand-colored focus states to form inputs.

Purpose: Form components are the primary user interaction points. Consistent, clean styling with proper focus states improves both aesthetics and accessibility. This satisfies requirements DS-07 (input/form redesign) and DS-08 (consistent sizing).

Output: Refined input.tsx with semantic tokens and brand-colored focus, refined select.tsx with semantic tokens, refined switch.tsx with semantic tokens.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP-v1.1.md
@.planning/STATE.md
@.planning/phases/v1.1-01-design-system/01-RESEARCH.md
@.planning/phases/v1.1-01-design-system/01-01-SUMMARY.md

@livos/packages/ui/tailwind.config.ts
@livos/packages/ui/src/shadcn-components/ui/input.tsx
@livos/packages/ui/src/shadcn-components/ui/select.tsx
@livos/packages/ui/src/shadcn-components/ui/switch.tsx
@livos/packages/ui/src/shadcn-lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign Input component with semantic tokens and brand focus</name>
  <files>livos/packages/ui/src/shadcn-components/ui/input.tsx</files>
  <action>
Refactor the Input component's CVA definition to use semantic design tokens. The goal is cleaner styling with a brand-colored focus state.

**IMPORTANT:** Preserve ALL component logic, exports, and secondary components (Labeled, PasswordInput, AnimatedInputError, InputError, iconRightClasses). Only change class strings.

**inputVariants base classes** — Replace raw opacity values with semantic tokens:

Current:
```
'flex w-full border border-white/10 bg-white/5 hover:bg-white/8 px-5 py-2 text-15 font-medium -tracking-1 transition-all duration-200 placeholder:text-white/30 focus-visible:placeholder:text-white/50 text-white/50 focus-visible:text-white focus-visible:bg-white/10 focus-visible:outline-none focus-visible:border-white/30 focus-visible:ring-3 focus-visible:ring-white/10 disabled:cursor-not-allowed disabled:opacity-40'
```

New:
```
'flex w-full border border-border-default bg-surface-base hover:bg-surface-1 px-5 py-2 text-body-lg font-medium -tracking-1 transition-all duration-200 placeholder:text-text-tertiary focus-visible:placeholder:text-text-secondary text-text-secondary focus-visible:text-text-primary focus-visible:bg-surface-1 focus-visible:outline-none focus-visible:border-brand focus-visible:ring-3 focus-visible:ring-brand/20 disabled:cursor-not-allowed disabled:opacity-40'
```

Token mapping:
- `border-white/10` -> `border-border-default` (0.10, same)
- `bg-white/5` -> `bg-surface-base` (0.04, slightly more subtle)
- `hover:bg-white/8` -> `hover:bg-surface-1` (0.06 vs 0.08)
- `text-15` -> `text-body-lg` (15px, same value but with line-height/letter-spacing)
- `placeholder:text-white/30` -> `placeholder:text-text-tertiary` (0.40, slightly more visible for accessibility)
- `focus-visible:placeholder:text-white/50` -> `focus-visible:placeholder:text-text-secondary` (0.60)
- `text-white/50` -> `text-text-secondary` (0.60, slightly more visible)
- `focus-visible:text-white` -> `focus-visible:text-text-primary` (0.90, slightly less harsh than pure white)
- `focus-visible:bg-white/10` -> `focus-visible:bg-surface-1` (0.06 vs 0.10)
- `focus-visible:border-white/30` -> `focus-visible:border-brand` (BRAND COLOR focus border - this is the key UX improvement)
- `focus-visible:ring-white/10` -> `focus-visible:ring-brand/20` (BRAND COLOR ring - matches the focus border)

**Variant: default** — Keep empty string (all styling in base).

**Variant: destructive** — Update to use semantic text tokens:
```
'text-destructive2-lightest border-destructive2-lightest focus-visible:border-destructive2-lightest focus-visible:ring-destructive2/20'
```
(No change needed here, destructive colors are already semantic enough.)

**sizeVariant: default** — Update radius:
```
'h-12 rounded-radius-lg'
```
(`rounded-14` -> `rounded-radius-lg` which is 16px, slightly rounder for the clean aesthetic)

**sizeVariant: short** — Update radius:
```
'h-10 rounded-radius-md'
```
(`rounded-12` -> `rounded-radius-md` which is 12px, same value)

**sizeVariant: short-square** — Update radius and text:
```
'h-10 rounded-radius-md px-3 text-body font-normal'
```
(`text-14` -> `text-body`, `rounded-12` -> `rounded-radius-md`)

**Labeled component** — Update label text class:
Change `text-12 -tracking-2 text-white/50` to `text-caption -tracking-2 text-text-secondary`

**InputError component** — Update text:
Change `text-13 font-normal -tracking-2 text-destructive2-lightest` to `text-body-sm font-normal -tracking-2 text-destructive2-lightest`
Change icon `h-4 w-4` to `h-icon-sm w-icon-sm`

**iconRightClasses** — Update icon size:
Change `icon: tw'h-5 w-5'` to `icon: tw'h-icon-md w-icon-md'`

**Do NOT change:**
- Any React logic, state management, event handlers
- The InputProps interface
- The PasswordInput component logic
- The AnimatedInputError framer-motion logic
- Any export statements
  </action>
  <verify>
Grep for `bg-surface-base` in input.tsx to confirm semantic surface token in base.
Grep for `border-brand` in input.tsx to confirm brand-colored focus border.
Grep for `ring-brand/20` in input.tsx to confirm brand-colored focus ring.
Grep for `text-body-lg` in input.tsx to confirm semantic text size.
Grep for `text-text-secondary` in input.tsx to confirm semantic text color.
Grep for `rounded-radius-` in input.tsx to confirm semantic radii.
Grep for `icon-sm` or `icon-md` in input.tsx to confirm icon size tokens.
Grep for `text-caption` in input.tsx to confirm label uses semantic text.
Run `npx tsc --noEmit` to verify compilation.
  </verify>
  <done>
Input component uses semantic tokens throughout: surface-base/1 backgrounds, border-default/brand borders, text-primary/secondary/tertiary text colors, body-lg text size, radius-md/lg radii. Focus state uses brand color for border and ring. Labeled uses caption text. InputError uses body-sm and icon-sm. All component logic and exports unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Redesign Select and Switch components with semantic tokens</name>
  <files>livos/packages/ui/src/shadcn-components/ui/select.tsx, livos/packages/ui/src/shadcn-components/ui/switch.tsx</files>
  <action>
Refactor Select and Switch components to use semantic design tokens.

**Select component changes:**

Only change class strings, not component structure or exports.

**SelectTrigger** — Replace raw opacity values:
Current: `'flex h-10 w-full items-center justify-between rounded-8 border border-white/10 bg-white/5 px-3 py-2 text-14 text-white placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-white/20 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1'`

New: `'flex h-10 w-full items-center justify-between rounded-radius-sm border border-border-default bg-surface-base px-3 py-2 text-body text-text-primary placeholder:text-text-secondary focus-visible:outline-none focus-visible:ring-3 focus-visible:ring-brand/20 focus-visible:border-brand disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1'`

Changes:
- `rounded-8` -> `rounded-radius-sm` (8px, same)
- `border-white/10` -> `border-border-default`
- `bg-white/5` -> `bg-surface-base`
- `text-14` -> `text-body` (14px)
- `text-white` -> `text-text-primary`
- `placeholder:text-white/50` -> `placeholder:text-text-secondary`
- `focus:outline-none focus:ring-2 focus:ring-white/20` -> `focus-visible:outline-none focus-visible:ring-3 focus-visible:ring-brand/20 focus-visible:border-brand` (brand focus, ring-3 for consistency, focus-visible instead of focus)

**SelectTrigger icon** — Change `opacity-50` to `text-text-tertiary` and remove bare opacity:
Change `<ChevronDown className='h-4 w-4 opacity-50' />` to `<ChevronDown className='h-icon-sm w-icon-sm text-text-tertiary' />`

**SelectContent** — Replace raw values:
Current: `'relative z-[9999] max-h-96 min-w-[8rem] overflow-hidden rounded-12 border border-white/10 bg-neutral-900 text-white shadow-md ...'`

New: `'relative z-[9999] max-h-96 min-w-[8rem] overflow-hidden rounded-radius-md border border-border-default bg-neutral-900 text-text-primary shadow-elevation-md ...'`

Changes:
- `rounded-12` -> `rounded-radius-md`
- `border-white/10` -> `border-border-default`
- `text-white` -> `text-text-primary`
- `shadow-md` -> `shadow-elevation-md`
- Keep ALL animation classes unchanged

**SelectLabel** — Update text:
Change `text-12 font-semibold` to `text-caption font-semibold`

**SelectItem** — Update:
Current: `'relative flex w-full cursor-default select-none items-center rounded-8 py-2 pl-8 pr-2 text-14 outline-none focus:bg-white/10 data-[disabled]:pointer-events-none data-[disabled]:opacity-50'`

New: `'relative flex w-full cursor-default select-none items-center rounded-radius-sm py-2 pl-8 pr-2 text-body outline-none focus:bg-surface-2 data-[disabled]:pointer-events-none data-[disabled]:opacity-50'`

Changes:
- `rounded-8` -> `rounded-radius-sm`
- `text-14` -> `text-body`
- `focus:bg-white/10` -> `focus:bg-surface-2`

**SelectItem check icon** — Change `h-4 w-4` to `h-icon-sm w-icon-sm`

**SelectSeparator** — Update:
Change `bg-white/10` to `bg-border-default`

**SelectScrollUpButton/SelectScrollDownButton icons** — Change `h-4 w-4` to `h-icon-sm w-icon-sm`

---

**Switch component changes:**

Only change class strings, not component structure or exports.

**SwitchPrimitives.Root** — Update:
Current: `'peer inline-flex h-[20px] w-[36px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-[background,color,box-shadow] focus-visible:outline-none focus-visible:ring-3 focus-visible:ring-white/6 focus-visible:ring-offset-1 focus-visible:ring-offset-white/20 disabled:opacity-50 data-[state=checked]:bg-brand data-[state=unchecked]:bg-white/10'`

New: `'peer inline-flex h-[20px] w-[36px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-[background,color,box-shadow] focus-visible:outline-none focus-visible:ring-3 focus-visible:ring-brand/20 focus-visible:ring-offset-1 focus-visible:ring-offset-border-emphasis disabled:opacity-50 data-[state=checked]:bg-brand data-[state=unchecked]:bg-surface-2'`

Changes:
- `focus-visible:ring-white/6` -> `focus-visible:ring-brand/20` (brand-colored focus ring for consistency)
- `focus-visible:ring-offset-white/20` -> `focus-visible:ring-offset-border-emphasis` (semantic border token)
- `data-[state=unchecked]:bg-white/10` -> `data-[state=unchecked]:bg-surface-2` (semantic surface)

**SwitchPrimitives.Thumb** — Keep unchanged (white thumb with shadow is already clean).

**Do NOT change:**
- Any component logic, refs, or event handlers
- The forwardRef patterns
- The displayName assignments
- Any export statements
  </action>
  <verify>
Grep for `bg-surface-base` in select.tsx to confirm semantic surface token in trigger.
Grep for `border-brand` in select.tsx to confirm brand-colored focus.
Grep for `text-body` in select.tsx to confirm semantic text sizes.
Grep for `rounded-radius-` in select.tsx to confirm semantic radii.
Grep for `icon-sm` in select.tsx to confirm icon size tokens.
Grep for `shadow-elevation-md` in select.tsx to confirm elevation shadow.
Grep for `bg-surface-2` in switch.tsx to confirm semantic surface in unchecked state.
Grep for `ring-brand/20` in switch.tsx to confirm brand-colored focus ring.
Run `npx tsc --noEmit` to verify no TypeScript errors.
  </verify>
  <done>
Select component uses semantic tokens: surface-base trigger background, border-default borders, text-primary/secondary text, body/caption text sizes, radius-sm/md radii, elevation-md shadow, icon-sm icon sizing, brand-colored focus. Switch uses surface-2 for unchecked state and brand/20 focus ring. All components maintain existing exports and logic.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes in ui package
2. Input uses brand-colored focus: grep for `focus-visible:border-brand` and `focus-visible:ring-brand/20` in input.tsx
3. Input uses semantic tokens: grep for `surface-base`, `border-default`, `text-text-primary`, `text-body-lg` in input.tsx
4. Select trigger uses semantic tokens: grep for `surface-base`, `border-default`, `text-body`, `radius-sm` in select.tsx
5. Select content uses elevation shadow: grep for `shadow-elevation-md` in select.tsx
6. Switch uses semantic surface: grep for `surface-2` in switch.tsx
7. All three components use `focus-visible:` instead of bare `focus:` for interactive states
8. All icon sizes use `icon-sm` or `icon-md` tokens
9. All exports unchanged for all three components
</verification>

<success_criteria>
- Input component fully migrated to semantic tokens with brand-colored focus state
- Select component fully migrated to semantic tokens with brand-colored focus state
- Switch component migrated to semantic tokens
- Consistent focus pattern across all form components: brand-colored border + brand/20 ring
- Consistent icon sizing with icon-sm/icon-md tokens
- All components preserve existing public API
- TypeScript compilation succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/v1.1-01-design-system/01-03-SUMMARY.md`
</output>
