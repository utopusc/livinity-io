---
phase: v1.1-03-window-sheet-system
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - livos/packages/ui/src/shadcn-components/ui/sheet.tsx
  - livos/packages/ui/src/providers/sheet-sticky-header.tsx
  - livos/packages/ui/src/shadcn-components/ui/sheet-scroll-area.tsx
autonomous: true

must_haves:
  truths:
    - "Sheet title uses semantic text-heading-lg and md:text-display-lg instead of raw text-24 and md:text-48"
    - "Sheet description uses semantic text-body-sm text-text-tertiary instead of raw text-sm text-neutral-400"
    - "Sheet sticky header border uses semantic border-border-default instead of raw border-white/10"
    - "Sheet scroll area thumb uses semantic bg-border-emphasis instead of raw bg-white/20"
    - "Sheet scroll area hover uses semantic bg-surface-2 instead of raw bg-white/10"
    - "Sheet wallpaper blur layer preserved at backdrop-blur-3xl (sheets need heavy blur for wallpaper effect)"
    - "Sheet rounded-t-28 and rounded-b-24 preserved (intentional large radii for full-panel overlays)"
  artifacts:
    - path: "livos/packages/ui/src/shadcn-components/ui/sheet.tsx"
      provides: "Sheet component with semantic typography tokens"
      contains: "text-heading-lg"
    - path: "livos/packages/ui/src/providers/sheet-sticky-header.tsx"
      provides: "Sheet sticky header with semantic border token"
      contains: "border-border-default"
    - path: "livos/packages/ui/src/shadcn-components/ui/sheet-scroll-area.tsx"
      provides: "Sheet scroll area with semantic surface/border tokens"
      contains: "bg-border-emphasis"
  key_links:
    - from: "livos/packages/ui/src/shadcn-components/ui/sheet.tsx"
      to: "livos/packages/ui/src/layouts/sheet.tsx"
      via: "SheetContent, SheetTitle imported by layout"
      pattern: "SheetContent"
    - from: "livos/packages/ui/src/providers/sheet-sticky-header.tsx"
      to: "livos/packages/ui/src/layouts/sheet.tsx"
      via: "SheetStickyHeaderTarget rendered in layout"
      pattern: "SheetStickyHeaderTarget"
    - from: "livos/packages/ui/src/shadcn-components/ui/sheet-scroll-area.tsx"
      to: "livos/packages/ui/src/layouts/sheet.tsx"
      via: "ScrollArea imported as sheet-scroll-area"
      pattern: "sheet-scroll-area"
---

<objective>
Migrate the sheet system components (Sheet, SheetStickyHeader, SheetScrollArea) to semantic design tokens. This covers requirements SM-01 (cleaner sheet header) and SM-02 (refined sheet background/border).

Purpose: Sheets are the primary full-panel overlay used for Settings, App Store, and Files. The sheet title, description, sticky header border, and scroll area all use raw opacity values that should be semantic tokens. The wallpaper blur effect on sheets is intentionally heavier than dialogs and must be preserved.

Output: Updated sheet.tsx with semantic typography, sticky header with semantic border, scroll area with semantic surface/border tokens.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP-v1.1.md
@.planning/STATE.md
@.planning/phases/v1.1-03-window-sheet-system/03-RESEARCH.md
@.planning/phases/v1.1-01-design-system/01-01-SUMMARY.md
@.planning/phases/v1.1-03-window-sheet-system/03-01-SUMMARY.md

@livos/packages/ui/tailwind.config.ts
@livos/packages/ui/src/shadcn-components/ui/sheet.tsx
@livos/packages/ui/src/layouts/sheet.tsx
@livos/packages/ui/src/providers/sheet-sticky-header.tsx
@livos/packages/ui/src/shadcn-components/ui/sheet-scroll-area.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate sheet.tsx title and description to semantic typography</name>
  <files>livos/packages/ui/src/shadcn-components/ui/sheet.tsx</files>
  <action>
Update sheet.tsx typography tokens. Preserve the wallpaper integration, cva variant system, SheetOverlay, and all component exports.

**sheet.tsx line 113 — SheetTitle className:**
Current:
```
text-24 font-bold -tracking-3 text-white/75 md:text-48
```

New:
```
text-heading-lg font-bold -tracking-3 text-text-primary md:text-display-lg
```

Changes:
- `text-24` -> `text-heading-lg` (heading-lg = 24px, lineHeight 1.2, fontWeight 600)
- `font-bold` -> keep `font-bold` as override (heading-lg defaults to 600, sheet title wants 700 for extra prominence)
- `text-white/75` -> `text-text-primary` (0.75 -> 0.90. Sheet titles are prominent -- text-primary at 0.90 gives better readability. text-secondary at 0.60 would be too dim for a page title.)
- `md:text-48` -> `md:text-display-lg` (display-lg = 48px, lineHeight 1.1, fontWeight 700)
- Keep `-tracking-3` (letter spacing override)

**sheet.tsx line 123 — SheetDescription className:**
Current:
```
text-sm text-neutral-400
```

New:
```
text-body-sm text-text-tertiary
```

Changes:
- `text-sm` -> `text-body-sm` (body-sm = 13px, lineHeight 1.45, fontWeight 400. text-sm is Tailwind default 14px -- body-sm at 13px is slightly smaller but matches our semantic scale better for a description subtitle)
- `text-neutral-400` -> `text-text-tertiary` (neutral-400 is a hardcoded gray. text-tertiary at rgba(255,255,255,0.40) provides proper opacity-based hierarchy on dark backgrounds)

**sheet.tsx — sheetVariants, SheetContent, SheetOverlay, SheetHeader, SheetFooter:**
Keep ALL unchanged. Specifically preserve:
- `bg-black/70` base (intentional sheet backdrop, not a surface)
- `rounded-t-28` on bottom/bottom-zoom variants (intentional large radius for full-panel)
- `rounded-b-24` on top variant
- `rounded-r-24` / `rounded-l-24` on side variants
- `backdrop-blur-3xl` on line 84 (wallpaper blur layer -- sheets NEED heavy blur)
- `backdrop-brightness-[0.3] backdrop-saturate-[1.2]` (wallpaper processing)
- `shadow-sheet-shadow` on line 88 (inner glow highlight)
- `bg-black` on line 72 (fallback background)
- All animation classes (data-[state=open/closed], duration-100)
- Wallpaper background image rendering system

**Do NOT change:**
- SheetContent wallpaper integration (useWallpaper hook, background image rendering)
- SheetOverlay class (currently commented out in SheetContent but defined)
- cva sheetVariants system
- Sheet rounded values (t-28, b-24, r-24, l-24)
- Component exports or props
  </action>
  <verify>
Grep for `text-heading-lg` in sheet.tsx to confirm semantic title typography.
Grep for `text-display-lg` in sheet.tsx to confirm semantic desktop title.
Grep for `text-text-primary` in sheet.tsx to confirm semantic title color.
Grep for `text-body-sm` in sheet.tsx to confirm semantic description typography.
Grep for `text-text-tertiary` in sheet.tsx to confirm semantic description color.
Grep for `text-white/75` in sheet.tsx to confirm raw title color removed.
Grep for `text-neutral-400` in sheet.tsx to confirm hardcoded gray removed.
Grep for `text-24` in sheet.tsx to confirm raw size removed from title.
Grep for `backdrop-blur-3xl` in sheet.tsx to confirm wallpaper blur PRESERVED.
Grep for `rounded-t-28` in sheet.tsx to confirm sheet radius preserved.
Run `npx tsc --noEmit` in the ui package.
  </verify>
  <done>
Sheet title uses text-heading-lg font-bold text-text-primary md:text-display-lg with semantic tokens. Sheet description uses text-body-sm text-text-tertiary. Wallpaper blur (backdrop-blur-3xl), sheet radii (rounded-t-28), and all animation/variant systems preserved unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate sheet sticky header and scroll area to semantic tokens</name>
  <files>livos/packages/ui/src/providers/sheet-sticky-header.tsx, livos/packages/ui/src/shadcn-components/ui/sheet-scroll-area.tsx</files>
  <action>
Update sheet-sticky-header.tsx border and sheet-scroll-area.tsx scrollbar styling. Preserve the scroll threshold logic, portal system, and Radix scroll area integration.

**sheet-sticky-header.tsx line 81 — SheetStickyHeaderTarget className:**
Current:
```
invisible absolute inset-x-0 top-0 z-50 h-[76px] rounded-t-20 border-b border-white/10 bg-black/50 px-5 backdrop-blur-xl empty:hidden
```

New:
```
invisible absolute inset-x-0 top-0 z-50 h-[76px] rounded-t-20 border-b border-border-default bg-black/50 px-5 backdrop-blur-xl empty:hidden
```

Changes:
- `border-white/10` -> `border-border-default` (0.10, same opacity value, semantic token)
- Keep `bg-black/50` (intentional semi-transparent black for sticky header on wallpaper)
- Keep `backdrop-blur-xl` (needed for readability over scrolling content)
- Keep `rounded-t-20` (matches sheet scroll area rounding)
- Keep `h-[76px]` (fixed header height)

**sheet-sticky-header.tsx line 85 — inline boxShadow:**
Current:
```
boxShadow: '2px 2px 2px 0px #FFFFFF0D inset'
```

Keep unchanged. This is a subtle inset highlight matching the sheet inner glow pattern. The hex value #FFFFFF0D (white at ~5% opacity) is a CSS shadow value, not a Tailwind class -- it cannot be replaced with a semantic token. The closest alternative would be shadow-button-highlight-soft but that has different spread/offset values.

**sheet-scroll-area.tsx line 49 — ScrollBar className (scrollbar track hover):**
Current:
```
group flex touch-none select-none rounded-tl-4 transition-colors hover:bg-white/10
```

New:
```
group flex touch-none select-none rounded-tl-4 transition-colors hover:bg-surface-2
```

Changes:
- `hover:bg-white/10` -> `hover:bg-surface-2` (0.10, same opacity value, semantic token)

**sheet-scroll-area.tsx line 56 — ScrollAreaThumb className:**
Current:
```
relative flex-1 rounded-full bg-white/20 group-hover:bg-white/50
```

New:
```
relative flex-1 rounded-full bg-border-emphasis group-hover:bg-white/50
```

Changes:
- `bg-white/20` -> `bg-border-emphasis` (0.20, same opacity value, semantic token)
- Keep `group-hover:bg-white/50` (hover state at 50% opacity has no close semantic match -- text-text-secondary is 0.60, surface-3 is 0.14, neither fits. Keep raw value for this high-visibility hover.)

**sheet-scroll-area.tsx — all other classes:**
Keep unchanged: ScrollArea root (`relative overflow-hidden`), viewport (`h-full w-full rounded-[inherit]`), vertical/horizontal dimension classes, Corner.

**Do NOT change:**
- Sheet sticky header scroll threshold (SCROLL_THRESHOLD = 110)
- Sheet sticky header portal system (SHEET_HEADER_ID)
- Sheet scroll area viewport mergeRefs or useFadeScroller integration
- Inline boxShadow on sticky header
- Component exports or props
  </action>
  <verify>
Grep for `border-border-default` in sheet-sticky-header.tsx to confirm semantic border.
Grep for `border-white/10` in sheet-sticky-header.tsx to confirm raw border removed.
Grep for `hover:bg-surface-2` in sheet-scroll-area.tsx to confirm semantic scrollbar hover.
Grep for `bg-border-emphasis` in sheet-scroll-area.tsx to confirm semantic thumb color.
Grep for `hover:bg-white/10` in sheet-scroll-area.tsx to confirm raw scrollbar hover removed.
Grep for `bg-white/20` in sheet-scroll-area.tsx to confirm raw thumb color removed.
Grep for `bg-black/50` in sheet-sticky-header.tsx to confirm sticky header background preserved.
Grep for `backdrop-blur-xl` in sheet-sticky-header.tsx to confirm blur preserved.
Run `npx tsc --noEmit` in the ui package.
  </verify>
  <done>
Sheet sticky header uses border-border-default instead of raw border-white/10. Sheet scroll area uses hover:bg-surface-2 for track and bg-border-emphasis for thumb. Sticky header background (bg-black/50), blur (backdrop-blur-xl), and inline boxShadow preserved. Scroll area high-visibility hover (group-hover:bg-white/50) kept as raw value where no semantic match exists.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes in ui package
2. sheet.tsx: `text-heading-lg`, `text-display-lg`, `text-text-primary`, `text-body-sm`, `text-text-tertiary` present
3. sheet.tsx: `text-24`, `text-48`, `text-white/75`, `text-neutral-400` absent from SheetTitle/SheetDescription
4. sheet.tsx: `backdrop-blur-3xl`, `rounded-t-28`, `bg-black/70`, `shadow-sheet-shadow` preserved
5. sheet-sticky-header.tsx: `border-border-default` present; `border-white/10` absent
6. sheet-sticky-header.tsx: `bg-black/50`, `backdrop-blur-xl`, inline boxShadow preserved
7. sheet-scroll-area.tsx: `hover:bg-surface-2`, `bg-border-emphasis` present
8. sheet-scroll-area.tsx: `hover:bg-white/10`, `bg-white/20` absent
9. All wallpaper integration, animation classes, cva variants unchanged
10. No changes to component behavior, props, or exports
</verification>

<success_criteria>
- Sheet title migrated to text-heading-lg font-bold text-text-primary md:text-display-lg
- Sheet description migrated to text-body-sm text-text-tertiary
- Sheet sticky header border migrated to border-border-default
- Sheet scroll area thumb migrated to bg-border-emphasis, track hover to hover:bg-surface-2
- Wallpaper blur (backdrop-blur-3xl) preserved on sheet content
- Sheet radii (rounded-t-28, rounded-b-24, etc.) preserved
- Sheet shadow (shadow-sheet-shadow) preserved
- Sticky header inline boxShadow preserved
- No raw text-white/75, text-neutral-400, border-white/10, bg-white/20, or hover:bg-white/10 remain in modified files
- TypeScript compilation succeeds
- No changes to component behavior, props, or exports
</success_criteria>

<output>
After completion, create `.planning/phases/v1.1-03-window-sheet-system/03-02-SUMMARY.md`
</output>
