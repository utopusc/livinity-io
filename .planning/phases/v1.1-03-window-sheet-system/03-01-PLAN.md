---
phase: v1.1-03-window-sheet-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts
  - livos/packages/ui/src/shadcn-components/ui/dialog.tsx
  - livos/packages/ui/src/shadcn-components/ui/alert-dialog.tsx
  - livos/packages/ui/src/components/ui/dialog-close-button.tsx
  - livos/packages/ui/src/utils/element-classes.ts
  - livos/packages/ui/src/shadcn-components/ui/button.tsx
autonomous: true

must_haves:
  truths:
    - "Dialog content uses semantic border token instead of raw border-white/5"
    - "Dialog backdrop blur reduced from 3xl to 2xl for subtler glassmorphism"
    - "Dialog title uses semantic text-heading instead of raw text-19 font-semibold leading-snug"
    - "Dialog description uses semantic text-body text-text-secondary instead of raw text-14 text-white/50"
    - "AlertDialog title uses semantic text-heading instead of raw text-19 font-semibold leading-snug"
    - "AlertDialog description uses semantic text-body text-text-secondary instead of raw text-14 text-white/50"
    - "AlertDialog icon uses semantic bg-surface-2 instead of raw bg-white/10"
    - "Dialog close button uses semantic text-text-tertiary instead of raw opacity-30"
    - "Dialog button sizes use rounded-radius-md (12px) instead of rounded-14 (14px)"
  artifacts:
    - path: "livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts"
      provides: "Foundation dialog classes with semantic tokens"
      contains: "border-border-subtle"
    - path: "livos/packages/ui/src/shadcn-components/ui/dialog.tsx"
      provides: "Dialog component with semantic typography"
      contains: "text-heading"
    - path: "livos/packages/ui/src/shadcn-components/ui/alert-dialog.tsx"
      provides: "AlertDialog component with semantic typography and surface tokens"
      contains: "text-heading"
    - path: "livos/packages/ui/src/shadcn-components/ui/button.tsx"
      provides: "Button dialog/lg sizes with rounded-radius-md"
      contains: "rounded-radius-md"
    - path: "livos/packages/ui/src/utils/element-classes.ts"
      provides: "Dialog close button class with semantic text tokens"
      contains: "text-text-tertiary"
  key_links:
    - from: "livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts"
      to: "livos/packages/ui/src/shadcn-components/ui/dialog.tsx"
      via: "dialogContentClass import"
      pattern: "dialogContentClass"
    - from: "livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts"
      to: "livos/packages/ui/src/shadcn-components/ui/alert-dialog.tsx"
      via: "dialogContentClass import"
      pattern: "dialogContentClass"
    - from: "livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts"
      to: "livos/packages/ui/src/components/ui/immersive-dialog.tsx"
      via: "dialogContentClass import (cascades to Plan 03-04)"
      pattern: "dialogContentClass"
    - from: "livos/packages/ui/src/utils/element-classes.ts"
      to: "livos/packages/ui/src/components/ui/dialog-close-button.tsx"
      via: "dialogHeaderCircleButtonClass import"
      pattern: "dialogHeaderCircleButtonClass"
---

<objective>
Migrate shared/dialog.ts foundation and its two primary consumers (Dialog, AlertDialog) to semantic design tokens. Also update dialog close button styling and resolve the deferred rounded-14 button decision from Phase 1.

Purpose: shared/dialog.ts was explicitly deferred from Phase 2 and is the single highest-cascade file in this phase -- changing `dialogContentClass` automatically affects ~60 consumer files across Dialog (27), AlertDialog (17), and ImmersiveDialog (16). This plan establishes the foundation that all subsequent Phase 3 plans build upon.

Output: Updated shared/dialog.ts with semantic border/blur tokens, Dialog and AlertDialog components with semantic typography, dialog close button with semantic text tokens, button dialog/lg sizes with rounded-radius-md.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP-v1.1.md
@.planning/STATE.md
@.planning/phases/v1.1-03-window-sheet-system/03-RESEARCH.md
@.planning/phases/v1.1-01-design-system/01-01-SUMMARY.md

@livos/packages/ui/tailwind.config.ts
@livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts
@livos/packages/ui/src/shadcn-components/ui/dialog.tsx
@livos/packages/ui/src/shadcn-components/ui/alert-dialog.tsx
@livos/packages/ui/src/components/ui/dialog-close-button.tsx
@livos/packages/ui/src/utils/element-classes.ts
@livos/packages/ui/src/shadcn-components/ui/button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate shared/dialog.ts, dialog.tsx, and dialog-close-button to semantic tokens</name>
  <files>livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts, livos/packages/ui/src/shadcn-components/ui/dialog.tsx, livos/packages/ui/src/components/ui/dialog-close-button.tsx, livos/packages/ui/src/utils/element-classes.ts</files>
  <action>
Update shared/dialog.ts, dialog.tsx, dialog-close-button.tsx, and element-classes.ts. Preserve all Radix primitive integration, animation classes, and component exports.

**shared/dialog.ts line 5 — dialogContentClass:**
Current:
```
fixed left-[50%] top-[50%] z-50 flex flex-col translate-x-[-50%] translate-y-[-50%] gap-6 rounded-24 bg-dialog-content/75 contrast-more:bg-dialog-content p-8 shadow-dialog backdrop-blur-3xl contrast-more:backdrop-blur-none duration-200 outline-none max-h-[calc(100%-16px)] border border-white/5
```

New:
```
fixed left-[50%] top-[50%] z-50 flex flex-col translate-x-[-50%] translate-y-[-50%] gap-6 rounded-24 bg-dialog-content/75 contrast-more:bg-dialog-content p-8 shadow-dialog backdrop-blur-2xl contrast-more:backdrop-blur-none duration-200 outline-none max-h-[calc(100%-16px)] border border-border-subtle
```

Changes:
- `backdrop-blur-3xl` -> `backdrop-blur-2xl` (reduce glassmorphism: 64px -> 40px for dialogs)
- `border-white/5` -> `border-border-subtle` (0.05 -> 0.06, semantic token)
- Keep `rounded-24` (intentional dialog rounding, larger than radius-xl 20px)
- Keep `bg-dialog-content/75` (custom dialog background, not a generic surface)
- Keep `shadow-dialog` (custom shadow with inset highlight)

**shared/dialog.ts — dialogOverlayClass, dialogContentAnimationClass, dialogContentAnimationSlideClass, dialogFooterClass:**
Keep all four unchanged. The overlay bg-black/60 is intentional overlay opacity. Animation classes and footer layout have no raw color tokens.

**dialog.tsx line 88 — DialogTitle className:**
Current:
```
text-left text-19 font-semibold leading-snug -tracking-2
```

New:
```
text-left text-heading -tracking-2
```

Changes:
- `text-19 font-semibold leading-snug` -> `text-heading` (heading = 19px, lineHeight 1.3, fontWeight 600. font-semibold is 600 = same as heading weight, leading-snug is 1.33 ~ heading 1.3)

**dialog.tsx line 100 — DialogDescription className:**
Current:
```
text-left text-14 font-normal leading-relaxed -tracking-2 text-white/50
```

New:
```
text-left text-body -tracking-2 text-text-secondary
```

Changes:
- `text-14 font-normal leading-relaxed` -> `text-body` (body = 14px, lineHeight 1.5, fontWeight 400)
- `text-white/50` -> `text-text-secondary` (0.50 -> 0.60, slight visibility increase -- accepted per research recommendation)

**dialog.tsx — all other classes:**
Keep unchanged: DialogContent width (`w-full max-w-[calc(100%-40px)] sm:max-w-[480px]`), DialogScrollableContent (`flex flex-col p-0`), DialogHeader (`flex flex-col space-y-1.5`).

**element-classes.ts line 5 — dialogHeaderCircleButtonClass:**
Current:
```
rounded-full outline-none opacity-30 hover:opacity-40
```

New:
```
rounded-full outline-none text-text-tertiary hover:text-text-secondary
```

Changes:
- `opacity-30 hover:opacity-40` -> `text-text-tertiary hover:text-text-secondary` (semantic text tokens instead of generic opacity which affects entire element including any backgrounds)

**dialog-close-button.tsx line 10 — icon className:**
Current:
```
h-5 w-5 lg:h-6 lg:w-6
```

New:
```
h-icon-md w-icon-md lg:h-icon-lg lg:w-icon-lg
```

Changes:
- `h-5 w-5` -> `h-icon-md w-icon-md` (20px, same value)
- `lg:h-6 lg:w-6` -> `lg:h-icon-lg lg:w-icon-lg` (24px, same value)

**Do NOT change:**
- Radix Dialog primitive integration
- Animation classes (dialogContentAnimationClass, dialogContentAnimationSlideClass)
- DialogPortal, DialogOverlay structure
- Component exports or props
- The commented-out close button in DialogContent
- The TODO comment on line 6 of shared/dialog.ts
  </action>
  <verify>
Grep for `border-border-subtle` in shared/dialog.ts to confirm semantic border.
Grep for `backdrop-blur-2xl` in shared/dialog.ts to confirm reduced blur.
Grep for `border-white/5` in shared/dialog.ts to confirm raw border removed.
Grep for `backdrop-blur-3xl` in shared/dialog.ts to confirm old blur removed.
Grep for `text-heading` in dialog.tsx to confirm semantic title typography.
Grep for `text-body` in dialog.tsx to confirm semantic description typography (ensure it matches `text-body` not `text-body-sm`).
Grep for `text-text-secondary` in dialog.tsx to confirm semantic description color.
Grep for `text-white/50` in dialog.tsx to confirm raw color removed.
Grep for `text-text-tertiary` in element-classes.ts to confirm semantic close button color.
Grep for `opacity-30` in element-classes.ts to confirm raw opacity removed.
Grep for `h-icon-md` in dialog-close-button.tsx to confirm semantic icon sizing.
Run `npx tsc --noEmit` in the ui package.
  </verify>
  <done>
shared/dialog.ts uses border-border-subtle and backdrop-blur-2xl. Dialog title uses text-heading, description uses text-body text-text-secondary. Dialog close button uses text-text-tertiary/text-text-secondary and icon-md/icon-lg sizing. No raw opacity hacks or hardcoded border colors remain.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate alert-dialog.tsx and button.tsx rounded-14 to semantic tokens</name>
  <files>livos/packages/ui/src/shadcn-components/ui/alert-dialog.tsx, livos/packages/ui/src/shadcn-components/ui/button.tsx</files>
  <action>
Update alert-dialog.tsx typography and icon styling. Update button.tsx to resolve the deferred rounded-14 decision. Preserve AlertDialogContext workaround, button variant system, and all component exports.

**alert-dialog.tsx line 98 — AlertDialogHeader icon className:**
Current:
```
mx-auto h-7 w-7 rounded-full bg-white/10 p-1
```

New:
```
mx-auto h-7 w-7 rounded-full bg-surface-2 p-1
```

Changes:
- `bg-white/10` -> `bg-surface-2` (0.10, same opacity value, semantic token)

**alert-dialog.tsx line 118 — AlertDialogTitle className:**
Current:
```
whitespace-pre-line break-words text-center text-19 font-semibold leading-snug -tracking-2
```

New:
```
whitespace-pre-line break-words text-center text-heading -tracking-2
```

Changes:
- `text-19 font-semibold leading-snug` -> `text-heading` (heading = 19px, lineHeight 1.3, fontWeight 600)

**alert-dialog.tsx line 133 — AlertDialogDescription className:**
Current:
```
whitespace-pre-line break-words text-14 font-normal leading-relaxed -tracking-2 text-white/50
```

New:
```
whitespace-pre-line break-words text-body -tracking-2 text-text-secondary
```

Changes:
- `text-14 font-normal leading-relaxed` -> `text-body` (body = 14px, lineHeight 1.5, fontWeight 400)
- `text-white/50` -> `text-text-secondary` (0.50 -> 0.60, accepted visibility increase)

**alert-dialog.tsx — all other classes:**
Keep unchanged: AlertDialogContent width (`w-full max-w-[calc(100%-40px)] sm:max-w-md`), AlertDialogHeader base (`flex flex-col space-y-2 text-center`), AlertDialogFooter (`md:justify-center`), AlertDialogAction enter icon (`text-11 opacity-40 max-md:hidden`), AlertDialogCancel structure.

**button.tsx line 32 — dialog size:**
Current:
```
rounded-14 h-[44px] md:h-[36px] min-w-[90px] px-5 font-semibold w-full md:w-auto text-body
```

New:
```
rounded-radius-md h-[44px] md:h-[36px] min-w-[90px] px-5 font-semibold w-full md:w-auto text-body
```

Changes:
- `rounded-14` -> `rounded-radius-md` (14px -> 12px. "Minimal & Clean" direction favors tighter radii. 12px matches other medium interactive elements.)

**button.tsx line 33 — lg size:**
Current:
```
rounded-14 h-[44px] px-6 text-body-lg font-semibold
```

New:
```
rounded-radius-md h-[44px] px-6 text-body-lg font-semibold
```

Changes:
- `rounded-14` -> `rounded-radius-md` (14px -> 12px, same rationale as dialog size)

**button.tsx — all other classes:**
Keep every other variant and size unchanged. Do NOT modify the base class, variant styles, compound variants, or exports.

**Do NOT change:**
- AlertDialogContext workaround (the @radix-ui/react-dialog import instead of @radix-ui/react-alert-dialog)
- AlertDialogAction or AlertDialogCancel behavior
- Button variant system (default, primary, secondary, destructive, ghost)
- Button compound variants
- Component exports or props
  </action>
  <verify>
Grep for `bg-surface-2` in alert-dialog.tsx to confirm semantic icon background.
Grep for `bg-white/10` in alert-dialog.tsx to confirm raw color removed.
Grep for `text-heading` in alert-dialog.tsx to confirm semantic title typography.
Grep for `text-body` in alert-dialog.tsx to confirm semantic description typography.
Grep for `text-text-secondary` in alert-dialog.tsx to confirm semantic description color.
Grep for `text-white/50` in alert-dialog.tsx to confirm raw color removed.
Grep for `rounded-14` in button.tsx to confirm no instances remain.
Grep for `rounded-radius-md` in button.tsx to confirm dialog and lg sizes use semantic radius.
Grep for `dialog` size variant usage in alert-dialog.tsx or dialog.tsx to confirm button dialog size is actually used by dialog components.
Run `npx tsc --noEmit` in the ui package.
  </verify>
  <done>
AlertDialog uses semantic tokens: bg-surface-2 for icon, text-heading for title, text-body text-text-secondary for description. Button dialog and lg sizes use rounded-radius-md (12px) instead of rounded-14 (14px), resolving the Phase 1 deferred decision. All raw color values and arbitrary radii eliminated from these components.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes in ui package
2. shared/dialog.ts: `border-border-subtle`, `backdrop-blur-2xl` present; `border-white/5`, `backdrop-blur-3xl` absent
3. dialog.tsx: `text-heading`, `text-body`, `text-text-secondary` present; `text-19`, `text-14`, `text-white/50` absent
4. alert-dialog.tsx: `bg-surface-2`, `text-heading`, `text-body`, `text-text-secondary` present; `bg-white/10`, `text-19`, `text-14`, `text-white/50` absent
5. element-classes.ts: `text-text-tertiary`, `hover:text-text-secondary` present; `opacity-30`, `hover:opacity-40` absent
6. dialog-close-button.tsx: `h-icon-md`, `w-icon-md`, `lg:h-icon-lg`, `lg:w-icon-lg` present
7. button.tsx: `rounded-14` absent; `rounded-radius-md` present on dialog and lg sizes
8. shared/dialog.ts: `rounded-24`, `bg-dialog-content/75`, `shadow-dialog` preserved (intentional)
9. alert-dialog.tsx: AlertDialogContext, AlertDialogAction, AlertDialogCancel unchanged
10. All component exports unchanged
</verification>

<success_criteria>
- shared/dialog.ts migrated: border-border-subtle, backdrop-blur-2xl (cascades to ~60 consumer files)
- Dialog title/description use semantic typography (text-heading, text-body, text-text-secondary)
- AlertDialog title/description use semantic typography (same pattern)
- AlertDialog icon uses bg-surface-2 instead of bg-white/10
- Dialog close button uses text-text-tertiary/text-text-secondary instead of opacity hack
- Dialog close button icon uses semantic sizing (icon-md, icon-lg)
- Button dialog/lg sizes use rounded-radius-md (12px) -- Phase 1 deferred decision resolved
- No raw text-white/50, bg-white/10, border-white/5, opacity-30, rounded-14, or backdrop-blur-3xl remain in modified files
- TypeScript compilation succeeds
- No changes to component behavior, props, or exports
</success_criteria>

<output>
After completion, create `.planning/phases/v1.1-03-window-sheet-system/03-01-SUMMARY.md`
</output>
