---
phase: v1.2-02-component-visual-fixes
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - livos/packages/ui/src/shadcn-components/ui/sheet.tsx
  - livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts
  - livos/packages/ui/src/modules/window/window.tsx
autonomous: true

must_haves:
  truths:
    - "Sheet wallpaper color shows through at brightness 0.38, not 0.30"
    - "Bottom sheets have a visible top border (border-t border-border-default)"
    - "Dialog has border-default edges (0.16 opacity), not border-subtle (0.10)"
    - "Windows have border-emphasis edges (0.30 opacity) for clear floating separation"
    - "Windows have shadow-elevation-lg Tailwind class applied when not dragging"
  artifacts:
    - path: "livos/packages/ui/src/shadcn-components/ui/sheet.tsx"
      provides: "Sheet with brighter wallpaper bleed-through and top border on bottom variants"
      contains: "backdrop-brightness-[0.38]"
    - path: "livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts"
      provides: "Dialog with upgraded border visibility"
      contains: "border-border-default"
    - path: "livos/packages/ui/src/modules/window/window.tsx"
      provides: "Window with emphasis border and elevation shadow"
      contains: "border-border-emphasis"
  key_links:
    - from: "window.tsx windowClass"
      to: "tailwind.config.ts shadow-elevation-lg"
      via: "Tailwind class (applied when inline boxShadow is undefined)"
      pattern: "shadow-elevation-lg"
    - from: "window.tsx inline boxShadow"
      to: "windowClass shadow-elevation-lg"
      via: "isDragging ternary: drag shadow inline, else undefined lets Tailwind apply"
      pattern: "isDragging.*undefined"
---

<objective>
Apply visual upgrades to sheet, dialog, and window overlay components for better depth and edge definition.

Purpose: Sheets need warmer wallpaper bleed-through and a defined top edge. Dialogs need visible borders instead of near-invisible ones. Windows need the strongest border tier and proper elevation shadow for clear floating separation from the desktop.
Output: Updated sheet.tsx, shared/dialog.ts, and window.tsx with all CV-03, CV-04, and CV-07 changes applied.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/v1.2-02-component-visual-fixes/02-RESEARCH.md
@livos/packages/ui/src/shadcn-components/ui/sheet.tsx
@livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts
@livos/packages/ui/src/modules/window/window.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Upgrade sheet backdrop brightness and add top border (CV-03)</name>
  <files>livos/packages/ui/src/shadcn-components/ui/sheet.tsx</files>
  <action>
In `sheet.tsx`, make these changes:

1. **Backdrop brightness** (line ~84): Find the inner div with `backdrop-brightness-[0.3]` and change to `backdrop-brightness-[0.38]`.

   Current: `backdrop-brightness-[0.3]`
   Target:  `backdrop-brightness-[0.38]`

2. **Bottom variant top border** (lines ~38-39): Find the `bottom` variant string in the `sheetVariants` cva definition and append `border-t border-border-default` to it.

   Current: `'inset-x-0 bottom-0 data-[state=closed]:slide-out-to-bottom-1/2 data-[state=open]:slide-in-from-bottom-1/2 rounded-t-28'`
   Target:  `'inset-x-0 bottom-0 data-[state=closed]:slide-out-to-bottom-1/2 data-[state=open]:slide-in-from-bottom-1/2 rounded-t-28 border-t border-border-default'`

3. **Bottom-zoom variant top border** (lines ~40-41): Find the `'bottom-zoom'` variant string and append `border-t border-border-default` to it.

   Current: `'inset-x-0 bottom-0 data-[state=closed]:zoom-out-75 data-[state=open]:zoom-in-90 rounded-t-28 data-[state=open]:duration-200 data-[state=closed]:duration-100'`
   Target:  `'inset-x-0 bottom-0 data-[state=closed]:zoom-out-75 data-[state=open]:zoom-in-90 rounded-t-28 data-[state=open]:duration-200 data-[state=closed]:duration-100 border-t border-border-default'`

Do NOT add border-t to the `top`, `left`, or `right` variants -- they already have their own edge borders.
  </action>
  <verify>
Read sheet.tsx and confirm:
- Inner div has `backdrop-brightness-[0.38]` (not 0.3)
- `bottom` variant string contains `border-t border-border-default`
- `bottom-zoom` variant string contains `border-t border-border-default`
- `top`, `left`, `right` variants are unchanged
  </verify>
  <done>Sheet shows wallpaper color at brightness 0.38 and bottom sheets have a visible top border.</done>
</task>

<task type="auto">
  <name>Task 2: Upgrade dialog border and window border/shadow (CV-04, CV-07)</name>
  <files>
    livos/packages/ui/src/shadcn-components/ui/shared/dialog.ts
    livos/packages/ui/src/modules/window/window.tsx
  </files>
  <action>
**Dialog (CV-04):**

In `shared/dialog.ts`, find `dialogContentClass` (line ~5). Change `border-border-subtle` to `border-border-default`.

Current: `border border-border-subtle`
Target:  `border border-border-default`

This upgrades the dialog border from 0.10 to 0.16 opacity for visible edges.

**Window (CV-07):**

In `window.tsx`, make 2 changes:

1. **Border upgrade** (line ~220 in `windowClass`): Change `border-border-default` to `border-border-emphasis`.

   Current: `border-border-default`
   Target:  `border-border-emphasis`

2. **Add shadow class** (in `windowClass`): Add `shadow-elevation-lg` to the `tw` tagged template string. Place it after `overflow-hidden` and before `border`.

   Add: `shadow-elevation-lg`

3. **Fix inline boxShadow conflict** (lines ~180-182): The window has an inline `boxShadow` style in the Framer Motion `style` prop that overrides any Tailwind shadow class. Change the non-dragging value from the hardcoded shadow string to `undefined` so the Tailwind `shadow-elevation-lg` class applies when not dragging.

   Current:
   ```typescript
   boxShadow: isDragging
       ? '0 35px 60px -15px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.08)'
       : '0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.05)',
   ```

   Target:
   ```typescript
   boxShadow: isDragging
       ? '0 35px 60px -15px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.08)'
       : undefined,
   ```

   This lets the Tailwind `shadow-elevation-lg` class apply in the normal (non-dragging) state, while the inline drag shadow overrides it during drag.
  </action>
  <verify>
Read shared/dialog.ts and confirm `dialogContentClass` has `border-border-default` (not border-subtle).

Read window.tsx and confirm:
- `windowClass` has `border-border-emphasis` (not border-default)
- `windowClass` contains `shadow-elevation-lg`
- Inline boxShadow non-dragging value is `undefined` (not a shadow string)
- Inline boxShadow dragging value is preserved unchanged
  </verify>
  <done>Dialog has visible border-default edges. Windows have border-emphasis and shadow-elevation-lg with correct inline style fix.</done>
</task>

</tasks>

<verification>
After both tasks, run TypeScript check:
```bash
cd livos && npx tsc --noEmit --pretty 2>&1 | head -30
```
Visually confirm: sheets show warmer wallpaper bleed-through with a defined top edge, dialogs have visible borders, windows float clearly above the desktop with strong borders and elevation shadow.
</verification>

<success_criteria>
- sheet.tsx has `backdrop-brightness-[0.38]` and `border-t border-border-default` on bottom variants
- shared/dialog.ts has `border-border-default` (not subtle)
- window.tsx windowClass has `border-border-emphasis` and `shadow-elevation-lg`
- window.tsx inline boxShadow uses `undefined` for non-dragging state
- No TypeScript errors introduced
</success_criteria>

<output>
After completion, create `.planning/phases/v1.2-02-component-visual-fixes/02-02-SUMMARY.md`
</output>
