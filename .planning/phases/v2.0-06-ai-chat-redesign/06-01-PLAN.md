---
phase: v2.0-06-ai-chat-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - livos/packages/ui/src/routes/ai-chat/index.tsx
autonomous: true

must_haves:
  truths:
    - "AI Chat layout works correctly in both sheet and window modes"
    - "Tool calls show as collapsible cards with status indicator"
    - "Empty state has centered icon with suggestion chips"
    - "Chat input supports multiline and has model indicator"
    - "Conversations grouped by date in sidebar"
---

<objective>
Redesign AI Chat with improved tool call visualization, better empty state, and ensured layout correctness in window mode.

The BF-02 fix (full-bleed window content) already fixed the layout issue. Now we improve the visual design.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Improve empty state</name>
  <files>livos/packages/ui/src/routes/ai-chat/index.tsx</files>
  <action>
Read the file. Find the empty state component (likely the section that shows when there are no messages).

Replace with a centered, more prominent empty state:
- Large AI/Nexus icon or sparkle icon in the center
- "Ask Nexus anything" heading
- Short description text
- 4-6 suggestion chips in a flex-wrap grid:
  - "Check system status"
  - "Update all apps"
  - "Show disk usage"
  - "List running containers"
  - "Create a backup"
  - "Show recent logs"

Each chip should be clickable and send the text as a message.

Style the chips as:
```
className='rounded-full border border-border-default bg-surface-base px-3 py-1.5 text-body-sm text-text-secondary transition-colors hover:bg-surface-1 hover:text-text-primary cursor-pointer'
```
  </action>
</task>

<task type="auto">
  <name>Task 2: Improve tool call display</name>
  <files>livos/packages/ui/src/routes/ai-chat/index.tsx</files>
  <action>
Find the ToolCallDisplay component. Improve it to be a proper collapsible card:

The tool call should show:
1. Tool icon/name with status dot (green = success, amber = running, red = error)
2. Brief result preview (first line or "Running...")
3. Collapsible full output (click to expand)
4. Clean card styling with border-border-subtle, rounded-radius-sm, bg-surface-base

Add a useState for expanded/collapsed state. When collapsed, show only the tool name and status. When expanded, show the full output in a monospace font.
  </action>
</task>

<task type="auto">
  <name>Task 3: Update chat message styling</name>
  <files>livos/packages/ui/src/routes/ai-chat/index.tsx</files>
  <action>
Update the ChatMessage component styling:

User messages:
- `bg-brand text-white rounded-radius-md px-4 py-3`

Assistant messages (remove the border-l-2 from v1.2, use clean card style):
- `bg-surface-1 text-text-primary rounded-radius-md px-4 py-3`

Also ensure the message max-width is reasonable for readability:
- Messages container should have `max-w-3xl mx-auto` for centered, readable layout
  </action>
</task>

<task type="auto">
  <name>Task 4: Update conversation sidebar grouping</name>
  <files>livos/packages/ui/src/routes/ai-chat/index.tsx</files>
  <action>
Find the ConversationSidebar component. If conversations are currently just a flat list, add date grouping headers:

Group conversations by:
- "Today" - conversations from today
- "Yesterday" - from yesterday
- "This Week" - from this week
- "Earlier" - everything else

Add group headers as:
```tsx
<div className='px-3 py-1.5 text-caption text-text-tertiary font-medium'>Today</div>
```

Use the conversation's timestamp to determine grouping. If timestamps aren't available in the conversation data, skip this task.
  </action>
</task>

</tasks>

<verification>
1. Empty state shows centered icon, heading, description, and suggestion chips
2. Tool calls display as collapsible cards with status
3. Messages have clean styling without border-l-2
4. Conversation sidebar has date grouping (if possible)
5. Run `cd livos && pnpm build`
</verification>
