---
phase: v1.1-04-settings-redesign
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - livos/packages/ui/src/routes/settings/domain-setup.tsx
  - livos/packages/ui/src/routes/settings/nexus-config.tsx
  - livos/packages/ui/src/routes/settings/integrations.tsx
autonomous: true

must_haves:
  truths:
    - "domain-setup.tsx uses semantic tokens instead of Tailwind defaults (text-xs, text-sm, rounded-xl)"
    - "nexus-config.tsx uses semantic tokens for all card containers, typography, and borders"
    - "integrations.tsx uses semantic tokens for all card containers, typography, and borders"
    - "Tab consumer overrides in nexus-config.tsx and integrations.tsx are cleaned up to use base component defaults"
    - "Colored status badges (green/red/orange/sky/indigo) are preserved"
    - "NexusConfig icon-only tab triggers keep their custom grid-cols-6 layout"
  artifacts:
    - path: "livos/packages/ui/src/routes/settings/domain-setup.tsx"
      provides: "Fully migrated domain setup wizard with semantic tokens"
      contains: "rounded-radius-md"
    - path: "livos/packages/ui/src/routes/settings/nexus-config.tsx"
      provides: "Nexus config with semantic tokens and cleaned tab overrides"
      contains: "bg-surface-base"
    - path: "livos/packages/ui/src/routes/settings/integrations.tsx"
      provides: "Integrations page with semantic tokens and cleaned tab overrides"
      contains: "text-text-secondary"
  key_links:
    - from: "livos/packages/ui/src/routes/settings/nexus-config.tsx"
      to: "livos/packages/ui/src/shadcn-components/ui/tabs.tsx"
      via: "imports Tabs, now uses base defaults without overrides"
      pattern: "import.*tabs"
    - from: "livos/packages/ui/src/routes/settings/integrations.tsx"
      to: "livos/packages/ui/src/shadcn-components/ui/tabs.tsx"
      via: "imports Tabs, now uses base defaults without overrides"
      pattern: "import.*tabs"
---

<objective>
Migrate the three largest standalone settings pages (domain-setup, nexus-config, integrations) to semantic tokens, and clean up Tab consumer overrides now that the base Tabs component has correct defaults from Plan 04-01.

Purpose: These three files represent 1,726 lines of settings UI that need token migration. domain-setup.tsx is the most inconsistent file (uses Tailwind defaults like text-xs/text-sm instead of project tokens). nexus-config.tsx and integrations.tsx have Tab components that redundantly override the base Tab styles — now that 04-01 fixed the base, these overrides should be removed.

Output: 3 large standalone files fully migrated to semantic tokens with clean Tab usage.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP-v1.1.md
@.planning/STATE.md
@.planning/phases/v1.1-04-settings-redesign/04-RESEARCH.md
@.planning/phases/v1.1-04-settings-redesign/04-01-SUMMARY.md

@livos/packages/ui/src/routes/settings/domain-setup.tsx
@livos/packages/ui/src/routes/settings/nexus-config.tsx
@livos/packages/ui/src/routes/settings/integrations.tsx

Token reference (from Phase 1, defined in tailwind.config.ts):
- Surface: surface-base (0.05), surface-1 (0.06), surface-2 (0.10), surface-3 (0.14)
- Border: border-subtle (0.06), border-default (0.10), border-emphasis (0.20)
- Text: text-primary (0.90), text-secondary (0.60), text-tertiary (0.40)
- Typography: text-caption-sm (11px), text-caption (12px), text-body-sm (13px), text-body (14px), text-body-lg (15px), text-heading-sm (17px), text-heading (19px), text-heading-lg (24px)
- Radii: rounded-radius-sm (8px), rounded-radius-md (12px), rounded-radius-lg (16px), rounded-radius-xl (20px)
- Icons: h-icon-sm/w-icon-sm (16px), h-icon-md/w-icon-md (20px)

domain-setup.tsx Tailwind-default-to-semantic mappings:
- text-xs (12px) -> text-caption
- text-sm (14px) -> text-body
- text-base (16px) -> text-body-lg (closest at 15px)
- text-lg (18px) -> text-heading-sm (closest at 17px)
- text-xl (20px) -> text-heading (closest at 19px)
- rounded-xl (12px) -> rounded-radius-md
- rounded-lg (8px) -> rounded-radius-sm
- rounded-2xl (16px) -> rounded-radius-lg
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate domain-setup.tsx from Tailwind defaults to semantic tokens</name>
  <files>
    livos/packages/ui/src/routes/settings/domain-setup.tsx
  </files>
  <action>
    domain-setup.tsx is the MOST INCONSISTENT file in the settings module. It uses Tailwind default text sizes (text-xs, text-sm, text-base) instead of the project's numeric system, plus Tailwind default radii (rounded-xl, rounded-lg, rounded-2xl). Migrate everything to semantic tokens.

    **Typography (Tailwind defaults -> semantic):**
    - `text-xs` -> `text-caption` (both 12px)
    - `text-sm` -> `text-body` (both 14px)
    - `text-base` -> `text-body-lg` (16px -> 15px, acceptable)
    - `text-lg` -> `text-heading-sm` (18px -> 17px, acceptable)
    - `text-xl` -> `text-heading` (20px -> 19px, acceptable)
    - Also migrate any numeric tokens: `text-12` -> `text-caption`, `text-14` -> `text-body`, etc.

    **Typography (color):**
    - `text-white/50` -> `text-text-secondary`
    - `text-white/40` -> `text-text-tertiary`
    - `text-white/70` -> `text-text-secondary`
    - `text-white/30` -> `text-text-tertiary`
    - `text-gray-400` -> `text-text-tertiary`
    - `text-gray-300` -> `text-text-secondary`

    **Surfaces:**
    - `bg-white/5` -> `bg-surface-base`
    - `bg-white/10` -> `bg-surface-2`
    - `bg-gray-800` -> `bg-surface-2` (dark gray background used for code blocks)
    - `bg-gray-900` -> `bg-surface-base` (darker background)

    **Borders:**
    - `border-white/10` -> `border-border-default`
    - `border-gray-700` -> `border-border-default`
    - `border-gray-600` -> `border-border-emphasis`

    **Radii:**
    - `rounded-xl` -> `rounded-radius-md` (12px = 12px, exact match)
    - `rounded-lg` -> `rounded-radius-sm` (8px = 8px, exact match)
    - `rounded-2xl` -> `rounded-radius-lg` (16px = 16px, exact match)
    - `rounded-md` -> `rounded-radius-sm` (6px -> 8px, acceptable)

    **KEEP AS-IS:**
    - `text-blue-400` — links and info text
    - `text-violet-500` — branded accent
    - `text-green-400`, `bg-green-500/20` — success states
    - `text-red-400`, `bg-red-500/20` — error states
    - `text-yellow-400`, `bg-yellow-500/20` — warning states
    - Any Framer Motion animation values

    The wizard flow (steps 1-5) should maintain its structure. Only visual tokens change, not component architecture.
  </action>
  <verify>
    Run `npx tsc --noEmit` from livos/packages/ui/ — no type errors.
    Grep for `text-xs` in domain-setup.tsx — should return 0 results.
    Grep for `text-sm` in domain-setup.tsx — should return 0 results (note: text-sm might appear inside className strings for non-text purposes; verify it refers to font size).
    Grep for `rounded-xl` in domain-setup.tsx — should return 0 results.
    Grep for `rounded-lg` in domain-setup.tsx — should return 0 results.
    Grep for `bg-gray-` in domain-setup.tsx — should return 0 results.
    Grep for `border-gray-` in domain-setup.tsx — should return 0 results.
  </verify>
  <done>
    domain-setup.tsx uses only semantic tokens for typography, surfaces, borders, and radii.
    No Tailwind default text sizes (text-xs/sm/base/lg/xl) remain.
    No Tailwind default radii (rounded-xl/lg/2xl) remain.
    No gray-N color references remain.
    Colored status indicators preserved (green/red/yellow/blue/violet).
    Wizard flow functionality unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate nexus-config.tsx and integrations.tsx + clean up Tab consumer overrides</name>
  <files>
    livos/packages/ui/src/routes/settings/nexus-config.tsx
    livos/packages/ui/src/routes/settings/integrations.tsx
  </files>
  <action>
    **nexus-config.tsx (537 lines):**

    Token migration (same systematic replacements):
    - `rounded-12 border border-white/10 bg-white/5 p-4` -> `rounded-radius-md border border-border-default bg-surface-base p-4`
    - `text-14 font-medium` -> `text-body font-medium`
    - `text-13 text-white/50` -> `text-body-sm text-text-secondary`
    - `text-12 text-white/50` -> `text-caption text-text-secondary`
    - `text-11 text-white/30` -> `text-caption-sm text-text-tertiary`
    - `bg-white/5` -> `bg-surface-base`
    - `bg-white/10` -> `bg-surface-2`
    - `border-white/10` -> `border-border-default`
    - `rounded-12` -> `rounded-radius-md`
    - `rounded-10` -> `rounded-radius-sm`
    - `rounded-8` -> `rounded-radius-sm`
    - `text-white/70` -> `text-text-secondary`
    - `text-white/50` -> `text-text-secondary`
    - `text-white/40` -> `text-text-tertiary`

    Tab consumer cleanup for nexus-config.tsx:
    - TabsList: Remove `bg-white/5` override (now in base). Keep structural overrides like `grid w-full grid-cols-6 gap-0.5 p-0.5 rounded-8` since these are layout-specific (but migrate `rounded-8` to `rounded-radius-sm`).
    - TabsTrigger: Remove `data-[state=active]:bg-white/10` if present. Keep icon-specific layout classes.
    - The NexusConfig tabs use icon-only triggers in a 6-column grid — keep `grid-cols-6` and icon sizing, just remove the color/surface overrides that duplicate base defaults.

    Toggle rows: Where nexus-config.tsx has the toggle+switch pattern (streaming toggle, retry toggle, etc.), consider importing and using SettingsToggleRow from `../_components/settings-toggle-row` if the pattern matches. If the standalone page has access to that import path, use it. Otherwise, just apply semantic tokens directly.

    Keep orange danger zone colors as-is (`border-orange-500/30 bg-orange-500/10`, `text-orange-400`).

    **integrations.tsx (469 lines):**

    Token migration (same systematic replacements as above):
    - All `rounded-12` -> `rounded-radius-md`
    - All `bg-white/5` -> `bg-surface-base`
    - All `border-white/10` -> `border-border-default`
    - All `text-14` -> `text-body`, `text-13` -> `text-body-sm`, `text-12` -> `text-caption`
    - All `text-white/50` -> `text-text-secondary`, `text-white/40` -> `text-text-tertiary`
    - All `bg-white/10` -> `bg-surface-2`
    - All `text-15` -> `text-body-lg`

    Tab consumer cleanup for integrations.tsx:
    - TabsList: Remove `bg-white/5` override. Keep `grid w-full grid-cols-2` layout override.
    - TabsTrigger: Remove `data-[state=active]:bg-white/10` override. Keep `flex items-center gap-1.5` for icon alignment.

    Keep brand-specific colors as-is:
    - `text-sky-400`, `bg-sky-500/10`, `border-sky-500/30` — Telegram brand
    - `text-indigo-400`, `bg-indigo-500/10`, `border-indigo-500/30` — Discord brand
    - `text-green-400`, `bg-green-500/20` — connected status
    - `text-red-400` — disconnected status

    Token input show/hide toggle: Migrate the surrounding container and label styles only.
  </action>
  <verify>
    Run `npx tsc --noEmit` from livos/packages/ui/ — no type errors.
    Grep for `bg-white/5` in nexus-config.tsx — should return 0 results.
    Grep for `border-white/10` in nexus-config.tsx — should return 0 results.
    Grep for `bg-white/5` in integrations.tsx — should return 0 results.
    Grep for `border-white/10` in integrations.tsx — should return 0 results.
    Grep for `text-14` in both files — should return 0 results.
    Grep for `text-13` in both files — should return 0 results.
  </verify>
  <done>
    nexus-config.tsx uses semantic tokens throughout, with tab overrides cleaned up to only include structural/layout classes.
    integrations.tsx uses semantic tokens throughout, with tab overrides cleaned up similarly.
    Brand colors (sky/indigo for Telegram/Discord) preserved.
    Danger zone colors (orange) preserved in nexus-config.tsx.
    Status indicators (green/red) preserved in both files.
    NexusConfig icon-only tab grid layout preserved (grid-cols-6 structural override kept).
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes from livos/packages/ui/
2. domain-setup.tsx: zero Tailwind default sizes (text-xs, text-sm, text-base, rounded-xl, rounded-lg)
3. nexus-config.tsx: zero `bg-white/5`, zero `border-white/10`, zero `text-14`
4. integrations.tsx: zero `bg-white/5`, zero `border-white/10`, zero `text-14`
5. Tab overrides: TabsList no longer has `bg-white/5`, TabsTrigger no longer has `data-[state=active]:bg-white/10` in consumer code
6. Brand/status colors preserved in all three files
7. Also check: Tab overrides in settings-content.tsx inline sections (NexusConfigSection, IntegrationsSection, TroubleshootSection, BackupsSection) — these should also be cleaned. If Plan 04-02 left them intact, clean them here too. Grep for `bg-white/5` on TabsList in settings-content.tsx and remove.
</verification>

<success_criteria>
- All 3 large standalone files fully migrated to semantic tokens
- domain-setup.tsx: zero Tailwind default tokens remaining
- Tab consumers use base defaults, only keeping structural/layout overrides
- Brand and status colors preserved throughout
- No type errors or broken functionality
</success_criteria>

<output>
After completion, create `.planning/phases/v1.1-04-settings-redesign/04-03-SUMMARY.md`
</output>
