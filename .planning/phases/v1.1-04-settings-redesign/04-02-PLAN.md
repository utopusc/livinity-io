---
phase: v1.1-04-settings-redesign
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - livos/packages/ui/src/routes/settings/_components/settings-content.tsx
  - livos/packages/ui/src/routes/settings/_components/settings-toggle-row.tsx
  - livos/packages/ui/src/routes/settings/_components/settings-info-card.tsx
  - livos/packages/ui/src/routes/settings/ai-config.tsx
  - livos/packages/ui/src/routes/settings/2fa-enable.tsx
  - livos/packages/ui/src/routes/settings/2fa-disable.tsx
  - livos/packages/ui/src/routes/settings/advanced.tsx
  - livos/packages/ui/src/routes/settings/_components/wallpaper-picker.tsx
autonomous: true

must_haves:
  truths:
    - "All 13 section content functions in settings-content.tsx use semantic tokens for cards, text, and borders"
    - "SettingsToggleRow shared component exists and is used for all toggle+switch rows"
    - "SettingsInfoCard shared component exists and is used for icon+title+description info cards"
    - "ai-config.tsx standalone page uses semantic tokens"
    - "2fa-enable.tsx and 2fa-disable.tsx use semantic tokens"
    - "advanced.tsx uses semantic tokens"
    - "wallpaper-picker.tsx uses semantic tokens"
    - "Colored status badges (green/red/orange) are preserved as-is"
  artifacts:
    - path: "livos/packages/ui/src/routes/settings/_components/settings-toggle-row.tsx"
      provides: "Extracted shared toggle row component"
      exports: ["SettingsToggleRow"]
    - path: "livos/packages/ui/src/routes/settings/_components/settings-info-card.tsx"
      provides: "Extracted shared info card component with variant support"
      exports: ["SettingsInfoCard"]
    - path: "livos/packages/ui/src/routes/settings/_components/settings-content.tsx"
      provides: "All section functions migrated to semantic tokens"
      contains: "bg-surface-base"
    - path: "livos/packages/ui/src/routes/settings/ai-config.tsx"
      provides: "Standalone AI config page with semantic tokens"
      contains: "text-text-secondary"
    - path: "livos/packages/ui/src/routes/settings/advanced.tsx"
      provides: "Advanced settings with semantic tokens"
      contains: "rounded-radius-md"
  key_links:
    - from: "livos/packages/ui/src/routes/settings/_components/settings-content.tsx"
      to: "livos/packages/ui/src/routes/settings/_components/settings-toggle-row.tsx"
      via: "imports SettingsToggleRow"
      pattern: "import.*SettingsToggleRow"
    - from: "livos/packages/ui/src/routes/settings/_components/settings-content.tsx"
      to: "livos/packages/ui/src/routes/settings/_components/settings-info-card.tsx"
      via: "imports SettingsInfoCard"
      pattern: "import.*SettingsInfoCard"
---

<objective>
Migrate all section content in settings-content.tsx to semantic tokens, extract the two most-repeated patterns into shared components (SettingsToggleRow, SettingsInfoCard), and migrate smaller standalone settings pages.

Purpose: This is the bulk content migration for settings. The 13 section functions in settings-content.tsx contain the majority of raw Tailwind values (~150 instances). Extracting the two most-repeated patterns (toggle rows: 15+ instances, info cards: 10+ instances) dramatically reduces code volume and ensures visual consistency across all settings sections.

Output: 2 new shared components extracted, 6 existing files migrated from raw values to semantic tokens.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP-v1.1.md
@.planning/STATE.md
@.planning/phases/v1.1-04-settings-redesign/04-RESEARCH.md
@.planning/phases/v1.1-04-settings-redesign/04-01-SUMMARY.md

@livos/packages/ui/src/routes/settings/_components/settings-content.tsx
@livos/packages/ui/src/routes/settings/ai-config.tsx
@livos/packages/ui/src/routes/settings/2fa-enable.tsx
@livos/packages/ui/src/routes/settings/2fa-disable.tsx
@livos/packages/ui/src/routes/settings/advanced.tsx
@livos/packages/ui/src/routes/settings/_components/wallpaper-picker.tsx

Token reference (from Phase 1, defined in tailwind.config.ts):
- Surface: surface-base (0.05), surface-1 (0.06), surface-2 (0.10), surface-3 (0.14)
- Border: border-subtle (0.06), border-default (0.10), border-emphasis (0.20)
- Text: text-primary (0.90), text-secondary (0.60), text-tertiary (0.40)
- Typography: text-caption-sm (11px), text-caption (12px), text-body-sm (13px), text-body (14px), text-body-lg (15px), text-heading-sm (17px), text-heading (19px), text-heading-lg (24px)
- Radii: rounded-radius-sm (8px), rounded-radius-md (12px), rounded-radius-lg (16px)
- Icons: h-icon-sm/w-icon-sm (16px), h-icon-md/w-icon-md (20px)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract SettingsToggleRow and SettingsInfoCard shared components</name>
  <files>
    livos/packages/ui/src/routes/settings/_components/settings-toggle-row.tsx
    livos/packages/ui/src/routes/settings/_components/settings-info-card.tsx
  </files>
  <action>
    **Create settings-toggle-row.tsx** — Extract the repeated toggle-with-switch pattern used 15+ times:
    ```typescript
    import {Switch} from '@/shadcn-components/ui/switch'
    import {cn} from '@/shadcn-lib/utils'

    interface SettingsToggleRowProps {
      title: string
      description?: string
      checked: boolean
      onCheckedChange: (checked: boolean) => void
      disabled?: boolean
      className?: string
    }

    export function SettingsToggleRow({title, description, checked, onCheckedChange, disabled, className}: SettingsToggleRowProps) {
      return (
        <div className={cn('flex items-center justify-between rounded-radius-md border border-border-default bg-surface-base p-4', className)}>
          <div className='flex-1 mr-3'>
            <div className='text-body font-medium'>{title}</div>
            {description && <div className='mt-1 text-caption text-text-secondary'>{description}</div>}
          </div>
          <Switch checked={checked} onCheckedChange={onCheckedChange} disabled={disabled} />
        </div>
      )
    }
    ```

    **Create settings-info-card.tsx** — Extract the repeated icon+title+description card pattern used 10+ times:
    ```typescript
    import {type ComponentType} from 'react'
    import {cn} from '@/shadcn-lib/utils'

    interface SettingsInfoCardProps {
      icon?: ComponentType<{className?: string}>
      title: string
      description?: string
      children?: React.ReactNode
      variant?: 'default' | 'success' | 'warning' | 'danger'
      className?: string
    }

    export function SettingsInfoCard({icon: Icon, title, description, children, variant = 'default', className}: SettingsInfoCardProps) {
      return (
        <div className={cn(
          'rounded-radius-md border p-4',
          variant === 'default' && 'border-border-default bg-surface-base',
          variant === 'success' && 'border-green-500/30 bg-green-500/10',
          variant === 'warning' && 'border-orange-500/30 bg-orange-500/10',
          variant === 'danger' && 'border-red-500/20 bg-red-500/5',
          className,
        )}>
          <div className='flex items-center gap-3'>
            {Icon && (
              <div className='flex h-10 w-10 items-center justify-center rounded-radius-sm bg-surface-2'>
                <Icon className='h-icon-md w-icon-md text-text-secondary' />
              </div>
            )}
            <div className='flex-1'>
              <div className='text-body font-medium'>{title}</div>
              {description && <div className='text-caption text-text-secondary'>{description}</div>}
            </div>
            {children}
          </div>
        </div>
      )
    }
    ```

    Follow the project conventions: kebab-case filenames, named exports, import with `@/` alias, cn() for className merging.
  </action>
  <verify>
    Run `npx tsc --noEmit` from livos/packages/ui/ — both new files compile without errors.
    Both files exist at the specified paths.
    SettingsToggleRow exports correctly.
    SettingsInfoCard exports correctly.
  </verify>
  <done>
    SettingsToggleRow component exists with semantic tokens, accepting title/description/checked/onCheckedChange/disabled/className props.
    SettingsInfoCard component exists with variant support (default/success/warning/danger), accepting icon/title/description/children/className props.
    Both use semantic tokens exclusively for generic surfaces/borders/text (colored variants preserved for status semantics).
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate settings-content.tsx section functions and smaller standalone pages to semantic tokens</name>
  <files>
    livos/packages/ui/src/routes/settings/_components/settings-content.tsx
    livos/packages/ui/src/routes/settings/ai-config.tsx
    livos/packages/ui/src/routes/settings/2fa-enable.tsx
    livos/packages/ui/src/routes/settings/2fa-disable.tsx
    livos/packages/ui/src/routes/settings/advanced.tsx
    livos/packages/ui/src/routes/settings/_components/wallpaper-picker.tsx
  </files>
  <action>
    **settings-content.tsx section functions (lines ~300-1453)** — Migrate ALL section content:

    For each of the 13 section functions, apply these systematic replacements:

    Card containers (the most common pattern):
    - `rounded-12 border border-white/10 bg-white/5 p-4` -> `rounded-radius-md border border-border-default bg-surface-base p-4`
    - Where appropriate, replace entire card+icon+title+description blocks with `<SettingsInfoCard>` component
    - Where appropriate, replace entire toggle+switch blocks with `<SettingsToggleRow>` component

    Typography:
    - `text-14 font-medium` -> `text-body font-medium`
    - `text-13 text-white/50` -> `text-body-sm text-text-secondary`
    - `text-12 text-white/50` -> `text-caption text-text-secondary`
    - `text-11 text-white/30` -> `text-caption-sm text-text-tertiary`
    - `text-16` -> `text-body-lg`
    - `text-15` -> `text-body-lg`

    Surfaces:
    - `bg-white/5` -> `bg-surface-base`
    - `bg-white/10` -> `bg-surface-2`
    - `bg-white/6` -> `bg-surface-1`

    Borders:
    - `border-white/10` -> `border-border-default`

    Radii:
    - `rounded-12` -> `rounded-radius-md`
    - `rounded-10` -> `rounded-radius-sm`
    - `rounded-8` -> `rounded-radius-sm`

    Text colors:
    - `text-white/70` -> `text-text-secondary`
    - `text-white/50` -> `text-text-secondary`
    - `text-white/40` -> `text-text-tertiary`
    - `text-white/30` -> `text-text-tertiary`
    - `opacity-40` -> replace element with `text-text-tertiary`
    - `opacity-60` -> replace element with `text-text-secondary`

    **KEEP THESE AS-IS (do NOT migrate):**
    - `text-green-400`, `bg-green-500/20`, `border-green-500/30` — success status
    - `text-red-400`, `bg-red-500/20`, `border-red-500/20` — error/danger status
    - `text-orange-400`, `bg-orange-500/10`, `border-orange-500/30` — warning/danger zone
    - `text-sky-400`, `bg-sky-500/10` — Telegram brand
    - `text-indigo-400`, `bg-indigo-500/10` — Discord brand
    - `text-blue-400` — external links
    - `bg-black` — log viewer background

    **ALSO KEEP:** TabsList and TabsTrigger className overrides within NexusConfigSection, IntegrationsSection, TroubleshootSection, and BackupsSection. These tab consumer overrides will be cleaned up in Plan 04-03. For now, just migrate the non-tab raw values within those sections.

    Add imports at top of settings-content.tsx:
    - `import {SettingsToggleRow} from './settings-toggle-row'`
    - `import {SettingsInfoCard} from './settings-info-card'`

    Use SettingsToggleRow for every instance matching the pattern: div > (div > title + description) + Switch. This appears in:
    - TwoFaSection (if 2FA is enabled, the toggle row)
    - AiConfigSection (if any toggles)
    - NexusConfigSection (~8 toggle rows: streaming, retry, agent settings)
    - IntegrationsSection (channel enabled toggles)
    - AdvancedSection (beta, DNS, etc.)
    - BackupsSection (auto-backup toggle)

    Use SettingsInfoCard for icon+title+description cards where the icon is inside a rounded container. This appears in:
    - AiConfigSection (API key status card)
    - NexusConfigSection (config status cards)
    - IntegrationsSection (channel status cards)

    **ai-config.tsx standalone page:**
    - Same token replacements as above
    - `rounded-12` -> `rounded-radius-md`, `border-white/10` -> `border-border-default`, `bg-white/5` -> `bg-surface-base`
    - `text-14` -> `text-body`, `text-13` -> `text-body-sm`, `text-12` -> `text-caption`, `text-11` -> `text-caption-sm`
    - `text-white/50` -> `text-text-secondary`, `text-white/70` -> `text-text-secondary`, `text-white/30` -> `text-text-tertiary`
    - `rounded-10` -> `rounded-radius-sm`, `bg-white/10` -> `bg-surface-2`
    - Keep green status badge as-is

    **2fa-enable.tsx:**
    - `text-16` -> `text-body-lg`, `text-17` -> `text-heading-sm`, `text-13` -> `text-body-sm`
    - `text-white/60` -> `text-text-secondary`
    - Any `bg-white/N` -> corresponding surface token

    **2fa-disable.tsx:**
    - Same systematic token replacements as above

    **advanced.tsx:**
    - `rounded-12` -> `rounded-radius-md`
    - `bg-white/6` -> `bg-surface-1` (the cardClass constant)
    - `text-14` -> `text-body`, `text-12` -> `text-caption`, `text-13` -> `text-body-sm`
    - `text-white/50` -> `text-text-secondary`, `text-white/40` -> `text-text-tertiary`
    - `border-white/10` -> `border-border-default`
    - Keep orange/red danger zone colors as-is

    **wallpaper-picker.tsx:**
    - `bg-white/10` -> `bg-surface-2`
    - `ring-white/50` -> `ring-white/50` (keep — this is an active selection indicator on wallpaper thumbnails, not a generic surface)
    - Any `text-12` -> `text-caption`
  </action>
  <verify>
    Run `npx tsc --noEmit` from livos/packages/ui/ — no type errors.
    Grep for `border-white/10` in settings-content.tsx sections (below line 300) — count should be 0 or very few (only in intentionally preserved tab overrides).
    Grep for `rounded-12` in settings-content.tsx — count should be 0 or very few (only in tab overrides to be cleaned in 04-03).
    Grep for `bg-white/5` in ai-config.tsx — should return 0.
    Grep for `bg-white/6` in advanced.tsx — should return 0.
    Grep for `SettingsToggleRow` in settings-content.tsx — should have multiple import/usage instances.
  </verify>
  <done>
    All 13 section functions in settings-content.tsx use semantic tokens for generic surfaces, borders, text colors, typography, and radii.
    SettingsToggleRow is used wherever the toggle+switch pattern appeared (replacing ~15 instances of inline markup).
    SettingsInfoCard is used wherever the icon+title+description card pattern appeared (replacing ~10 instances).
    ai-config.tsx, 2fa-enable.tsx, 2fa-disable.tsx, advanced.tsx, wallpaper-picker.tsx all migrated to semantic tokens.
    Colored status badges preserved (green/red/orange/sky/indigo).
    Tab consumer overrides left intact for Plan 04-03 cleanup.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes from livos/packages/ui/
2. New files exist: settings-toggle-row.tsx, settings-info-card.tsx
3. settings-content.tsx imports and uses both shared components
4. Grep for `bg-white/5` in section functions (lines 300+) — should be 0 or only in tab overrides
5. Grep for `text-white/50` across migrated files — should only appear in tab overrides (04-03 scope)
6. Green/red/orange status badges remain unchanged in all files
7. Tab className overrides on TabsList/TabsTrigger within sections are intentionally preserved (04-03 scope)
</verification>

<success_criteria>
- 2 new shared components created with semantic tokens and proper TypeScript interfaces
- All 13 section functions use semantic tokens (except tab overrides deferred to 04-03)
- 5 standalone files migrated to semantic tokens
- Shared components reduce repeated markup by ~200-300 lines
- No breaking changes — all existing functionality preserved
- Colored status badges (green/red/orange/sky/indigo) intentionally preserved
</success_criteria>

<output>
After completion, create `.planning/phases/v1.1-04-settings-redesign/04-02-SUMMARY.md`
</output>
