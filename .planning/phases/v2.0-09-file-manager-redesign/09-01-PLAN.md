---
phase: v2.0-09-file-manager-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - livos/packages/ui/src/features/files/components/*.tsx
  - livos/packages/ui/src/features/files/index.tsx
autonomous: true

must_haves:
  truths:
    - "File manager has a toggle between list and grid view"
    - "Breadcrumb navigation shows clickable path segments"
    - "Empty folders show illustration and Upload CTA"
    - "File rows show quick action buttons on hover"
---

<objective>
Improve File Manager with grid view toggle, breadcrumb navigation, empty states, and hover actions.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Add breadcrumb navigation</name>
  <files>livos/packages/ui/src/features/files/components/actions-bar.tsx or equivalent header</files>
  <action>
Read the file manager component structure. Find the path display/navigation area.

Add or replace with breadcrumb navigation:

```tsx
function Breadcrumbs({path, onNavigate}: {path: string; onNavigate: (path: string) => void}) {
    const segments = path.split('/').filter(Boolean)

    return (
        <nav className='flex items-center gap-1 text-body-sm'>
            <button
                onClick={() => onNavigate('/')}
                className='text-text-tertiary hover:text-text-primary transition-colors'
            >
                Home
            </button>
            {segments.map((segment, i) => {
                const segmentPath = '/' + segments.slice(0, i + 1).join('/')
                const isLast = i === segments.length - 1
                return (
                    <React.Fragment key={segmentPath}>
                        <span className='text-text-tertiary'>/</span>
                        <button
                            onClick={() => onNavigate(segmentPath)}
                            className={cn(
                                'transition-colors',
                                isLast ? 'text-text-primary font-medium' : 'text-text-tertiary hover:text-text-primary'
                            )}
                        >
                            {segment}
                        </button>
                    </React.Fragment>
                )
            })}
        </nav>
    )
}
```

Integrate into the file manager header area.
  </action>
</task>

<task type="auto">
  <name>Task 2: Add grid view toggle</name>
  <files>livos/packages/ui/src/features/files/index.tsx</files>
  <action>
Read the files index. Add a view mode toggle (list vs grid) using useState.

Add toggle buttons in the actions bar:
```tsx
<div className='flex items-center gap-1 rounded-radius-sm bg-surface-base p-0.5'>
    <button
        onClick={() => setViewMode('list')}
        className={cn('rounded-radius-sm p-1.5 transition-colors', viewMode === 'list' ? 'bg-surface-2 text-text-primary' : 'text-text-tertiary')}
    >
        <RiListUnordered className='h-4 w-4' />
    </button>
    <button
        onClick={() => setViewMode('grid')}
        className={cn('rounded-radius-sm p-1.5 transition-colors', viewMode === 'grid' ? 'bg-surface-2 text-text-primary' : 'text-text-tertiary')}
    >
        <RiGridFill className='h-4 w-4' />
    </button>
</div>
```

For grid view, create a simple card-based grid layout:
```tsx
{viewMode === 'grid' ? (
    <div className='grid grid-cols-3 gap-3 md:grid-cols-4 lg:grid-cols-6'>
        {files.map(file => (
            <div key={file.name} className='flex flex-col items-center gap-2 rounded-radius-sm p-3 transition-colors hover:bg-surface-1 cursor-pointer'>
                <div className='h-12 w-12 text-text-tertiary'>
                    {/* File type icon */}
                </div>
                <span className='max-w-full truncate text-caption text-text-secondary'>{file.name}</span>
            </div>
        ))}
    </div>
) : (
    /* existing list view */
)}
```

Adapt based on actual file data structure.
  </action>
</task>

<task type="auto">
  <name>Task 3: Add empty folder state</name>
  <files>livos/packages/ui/src/features/files/components/*.tsx</files>
  <action>
Find where the file list renders. When the file list is empty, show:

```tsx
<div className='flex flex-col items-center justify-center gap-3 py-16'>
    <div className='text-text-tertiary'>
        <RiFolderOpenLine className='h-12 w-12' />
    </div>
    <p className='text-body text-text-secondary'>This folder is empty</p>
    <button className='rounded-radius-sm bg-surface-1 px-4 py-2 text-body-sm text-text-primary transition-colors hover:bg-surface-2'>
        Upload Files
    </button>
</div>
```
  </action>
</task>

<task type="auto">
  <name>Task 4: Add hover quick actions on file rows</name>
  <files>livos/packages/ui/src/features/files/components/list-view-file-item.tsx</files>
  <action>
Read the file. Add hover-visible action buttons to each file row.

Add at the end of each file row (visible only on hover):
```tsx
<div className='absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity'>
    <button className='rounded-radius-sm p-1 text-text-tertiary hover:text-text-primary hover:bg-surface-1'>
        <RiDownloadLine className='h-4 w-4' />
    </button>
    <button className='rounded-radius-sm p-1 text-text-tertiary hover:text-text-primary hover:bg-surface-1'>
        <RiDeleteBinLine className='h-4 w-4' />
    </button>
</div>
```

Add `group` and `relative` to the row container className.
  </action>
</task>

</tasks>

<verification>
1. Breadcrumbs show clickable path
2. Grid/list toggle works
3. Empty folder shows CTA
4. Hover actions appear on file rows
5. Run `cd livos && pnpm build`
</verification>
