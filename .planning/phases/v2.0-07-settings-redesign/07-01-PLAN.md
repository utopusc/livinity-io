---
phase: v2.0-07-settings-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - livos/packages/ui/src/routes/settings/_components/settings-content.tsx
  - livos/packages/ui/src/routes/settings/_components/settings-content-mobile.tsx
autonomous: true

must_haves:
  truths:
    - "Settings sidebar has a search input that filters menu items"
    - "Menu items are grouped under category headers (System, User, Advanced)"
    - "Destructive actions (Factory Reset, Shutdown, Restart) are in a visually distinct danger zone"
    - "Search filters both by label and description text"
---

<objective>
Redesign the settings page with search functionality, grouped categories, and a danger zone for destructive actions.

Current state: Settings has a flat list of 12 menu items in settings-content.tsx (desktop) and settings-content-mobile.tsx (mobile). No search, no grouping, no visual distinction for dangerous actions.

Key files:
- livos/packages/ui/src/routes/settings/_components/settings-content.tsx (desktop menu + detail view)
- livos/packages/ui/src/routes/settings/_components/settings-content-mobile.tsx (mobile list)
- livos/packages/ui/src/routes/settings/_components/shared.tsx (menu items definition)
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Add search and grouped categories to desktop settings</name>
  <files>livos/packages/ui/src/routes/settings/_components/settings-content.tsx</files>
  <action>
Read the file. Find the menu items list (likely an array of objects with id, icon, label, description).

1. Add a search state:
```tsx
const [search, setSearch] = useState('')
```

2. Group the menu items into categories. Create a grouping structure:
```tsx
const menuGroups = [
    {
        label: 'User',
        items: menuItems.filter(item => ['account', 'wallpaper', '2fa', 'language'].includes(item.id))
    },
    {
        label: 'System',
        items: menuItems.filter(item => ['ai-config', 'nexus-config', 'integrations', 'domain', 'backups', 'migration', 'software-update'].includes(item.id))
    },
    {
        label: 'Advanced',
        items: menuItems.filter(item => ['troubleshoot', 'advanced'].includes(item.id))
    },
]
```

Adjust the item IDs based on what's actually in the menuItems array.

3. Add search filtering:
```tsx
const filteredGroups = menuGroups
    .map(group => ({
        ...group,
        items: group.items.filter(item =>
            search === '' ||
            item.label.toLowerCase().includes(search.toLowerCase()) ||
            item.description?.toLowerCase().includes(search.toLowerCase())
        )
    }))
    .filter(group => group.items.length > 0)
```

4. Add the search input at the top of the sidebar menu:
```tsx
<div className='mb-3'>
    <input
        type='text'
        placeholder='Search settings...'
        value={search}
        onChange={(e) => setSearch(e.target.value)}
        className='w-full rounded-radius-sm border border-border-default bg-surface-1 px-3 py-2 text-body-sm text-text-primary placeholder:text-text-tertiary outline-none focus:border-brand transition-colors'
    />
</div>
```

5. Replace the flat menu item list with grouped rendering:
```tsx
{filteredGroups.map(group => (
    <div key={group.label} className='mb-4'>
        <div className='px-2 py-1.5 text-caption font-medium text-text-tertiary uppercase tracking-wider'>
            {group.label}
        </div>
        {group.items.map(item => (
            /* existing menu item rendering */
        ))}
    </div>
))}
```

6. Add a danger zone at the very bottom of the sidebar (after all groups), always visible (not filtered):
```tsx
<div className='mt-auto pt-4 border-t border-border-subtle'>
    <div className='px-2 py-1.5 text-caption font-medium text-red-400/70 uppercase tracking-wider'>
        Danger Zone
    </div>
    {/* Shutdown and Restart buttons styled with red/destructive colors */}
    <button className='w-full flex items-center gap-3 rounded-radius-sm px-3 py-2 text-body-sm text-red-400 transition-colors hover:bg-red-500/10'>
        <RiRestartLine className='h-4 w-4' />
        Restart
    </button>
    <button className='w-full flex items-center gap-3 rounded-radius-sm px-3 py-2 text-body-sm text-red-400 transition-colors hover:bg-red-500/10'>
        <RiShutDownLine className='h-4 w-4' />
        Shutdown
    </button>
</div>
```

Wire these to the existing restart/shutdown dialog triggers.
  </action>
</task>

<task type="auto">
  <name>Task 2: Add search and grouping to mobile settings</name>
  <files>livos/packages/ui/src/routes/settings/_components/settings-content-mobile.tsx</files>
  <action>
Read the file. Apply similar changes for mobile:

1. Add search input at the top of the settings list
2. Group items under section headers
3. Add danger zone at bottom with red-styled destructive actions

The mobile search input should be:
```tsx
<div className='px-4 pb-3'>
    <input
        type='text'
        placeholder='Search settings...'
        value={search}
        onChange={(e) => setSearch(e.target.value)}
        className='w-full rounded-radius-sm border border-border-default bg-surface-1 px-3 py-2.5 text-body text-text-primary placeholder:text-text-tertiary outline-none focus:border-brand transition-colors'
    />
</div>
```

Mobile group headers should be slightly larger for touch:
```tsx
<div className='px-4 py-2 text-caption font-medium text-text-tertiary uppercase tracking-wider'>
    {group.label}
</div>
```
  </action>
</task>

</tasks>

<verification>
1. Desktop settings sidebar has search input that filters menu items
2. Menu items grouped under User, System, Advanced headers
3. Search filters by both label and description
4. Danger zone with red-styled shutdown/restart at bottom
5. Mobile settings also has search and grouping
6. Run `cd livos && pnpm build`
</verification>
