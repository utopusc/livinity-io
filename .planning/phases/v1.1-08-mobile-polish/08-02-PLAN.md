---
phase: v1.1-08-mobile-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - livos/packages/ui/src/shadcn-components/ui/button.tsx
  - livos/packages/ui/src/components/ui/icon-button.tsx
autonomous: true

must_haves:
  truths:
    - "All button sizes that appear on mobile have at least 44px touch target height"
    - "Icon-only buttons have at least 44px touch target on mobile"
    - "Desktop button sizes remain unchanged (34px, 28px etc)"
    - "The dialog button size pattern (h-[44px] md:h-[36px]) is the reference model"
  artifacts:
    - path: "livos/packages/ui/src/shadcn-components/ui/button.tsx"
      provides: "Mobile-optimized button size variants"
      contains: "md:h-[34px]"
    - path: "livos/packages/ui/src/components/ui/icon-button.tsx"
      provides: "Icon button inheriting mobile-optimized sizes"
  key_links:
    - from: "livos/packages/ui/src/shadcn-components/ui/button.tsx"
      to: "all button consumers"
      via: "buttonVariants CVA export"
      pattern: "buttonVariants"
---

<objective>
Ensure all interactive button elements meet the 44px minimum touch target guideline on mobile viewports.

Purpose: Research identified that button `sm` (28px), `default` (34px), `md` (34px), and `icon-only` (34px) sizes are below the 44px minimum touch target for mobile. The `dialog` size already implements the correct pattern: `h-[44px] md:h-[36px]`. This plan extends that pattern to other sizes that appear on mobile.

Output: Updated button.tsx with mobile-first touch targets that scale down to desktop sizes at the `md` breakpoint.
</objective>

<execution_context>
@C:\Users\hello\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hello\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP-v1.1.md
@.planning/STATE.md
@livos/packages/ui/src/shadcn-components/ui/button.tsx
@livos/packages/ui/src/components/ui/icon-button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update button size variants with mobile touch targets</name>
  <files>livos/packages/ui/src/shadcn-components/ui/button.tsx</files>
  <action>
  Update the `buttonVariants` CVA definition in `button.tsx` to add mobile-first 44px touch targets for sizes that appear on mobile. The `dialog` size already uses this pattern correctly: `h-[44px] md:h-[36px]`.

  **Size changes in the `size` variants object:**

  1. `default`: Change from `h-[34px]` to `h-[44px] md:h-[34px]`
     - Current: `'rounded-radius-md h-[34px] px-3.5 text-body-sm'`
     - New: `'rounded-radius-md h-[44px] md:h-[34px] px-3.5 text-body-sm'`

  2. `md`: Change from `h-[34px]` to `h-[44px] md:h-[34px]`
     - Current: `'rounded-radius-md h-[34px] min-w-[80px] px-4 text-body-sm'`
     - New: `'rounded-radius-md h-[44px] md:h-[34px] min-w-[80px] px-4 text-body-sm'`

  3. `icon-only`: Change from `h-[34px] w-[34px]` to `h-[44px] w-[44px] md:h-[34px] md:w-[34px]`
     - Current: `'rounded-radius-md h-[34px] w-[34px]'`
     - New: `'rounded-radius-md h-[44px] w-[44px] md:h-[34px] md:w-[34px]'`

  4. `sm`: Change from `h-[28px]` to `h-[44px] md:h-[28px]`
     - Current: `'rounded-radius-sm h-[28px] px-3 text-caption gap-1.5'`
     - New: `'rounded-radius-sm h-[44px] md:h-[28px] px-3 text-caption gap-1.5'`

  **Do NOT change these sizes** (they already meet 44px or are desktop-only):
  - `dialog`: Already `h-[44px] md:h-[36px]` -- leave as-is
  - `lg`: Already `h-[44px]` -- leave as-is
  - `xl`: Already `h-[52px]` -- leave as-is
  - `input-short`: Already `h-10` (40px) -- close enough, leave as-is
  - `md-squared`: Already `h-[38px]` -- close enough, leave as-is

  **Why this is safe:** The responsive `md:` prefix means the change only affects viewports below 768px. At desktop sizes (768px+), all buttons render at their original heights. Mobile users get larger tap targets. The `dialog` size has been using this exact pattern since Phase 1 without issues.
  </action>
  <verify>
  - `cd livos/packages/ui && pnpm build` succeeds
  - Grep for `md:h-[34px]` in button.tsx confirms responsive sizes applied
  - Grep for `md:h-[28px]` in button.tsx confirms sm size is responsive
  - Grep for `md:w-[34px]` in button.tsx confirms icon-only width is responsive
  - Count of `h-[44px]` occurrences should be 5 (sm, default, md, icon-only, dialog)
  </verify>
  <done>
  - Button `default` renders at 44px height on mobile, 34px on desktop
  - Button `md` renders at 44px height on mobile, 34px on desktop
  - Button `sm` renders at 44px height on mobile, 28px on desktop
  - Button `icon-only` renders at 44x44px on mobile, 34x34px on desktop
  - `dialog`, `lg`, `xl` sizes unchanged
  - No build errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify icon-button inherits updated sizes</name>
  <files>livos/packages/ui/src/components/ui/icon-button.tsx</files>
  <action>
  Verify that `icon-button.tsx` uses `buttonVariants` from `button.tsx` and will automatically inherit the updated mobile touch targets.

  The IconButton component already imports and uses `buttonVariants({variant, size, text, className})` in its className, so the mobile touch target changes from Task 1 will cascade automatically.

  **No code changes needed in icon-button.tsx** -- just verify the inheritance chain:
  1. Confirm `import {buttonVariants} from '@/shadcn-components/ui/button'` exists
  2. Confirm `buttonVariants({variant, size, text, className})` is used in the component's className
  3. If both are true, no changes needed

  **If the Icon component inside IconButton has a fixed size that doesn't scale:**
  Check if the `Icon` component renders at a fixed pixel size via its `size` prop mapping. The icon inside should remain the same size (the touch target padding grows, not the icon). This is correct behavior -- we want a bigger tap area, not a bigger icon.
  </action>
  <verify>
  - Grep confirms `buttonVariants` import in icon-button.tsx
  - No changes needed to icon-button.tsx (it inherits from button.tsx)
  </verify>
  <done>
  - IconButton automatically inherits 44px mobile touch targets from button.tsx
  - No code changes required in icon-button.tsx
  - Icon sizes remain unchanged (only the button container grows on mobile)
  </done>
</task>

</tasks>

<verification>
- Build passes: `cd livos/packages/ui && pnpm build`
- Grep confirms responsive height classes in button.tsx
- IconButton inherits changes via buttonVariants import
</verification>

<success_criteria>
- All button sizes render at 44px+ height on mobile viewports
- Desktop sizes unchanged
- No TypeScript or build errors
- IconButton inherits changes automatically
</success_criteria>

<output>
After completion, create `.planning/phases/v1.1-08-mobile-polish/08-02-SUMMARY.md`
</output>
